PNNL-14382 Task Report for the Energy Efficient and Affordable Small Commercial and Residential Buildings Research Program Project 2.5 - Pattern-Recognition Based Fault Detection and Diagnostics Automated Diagnostics Software Requirements Specification Version 1.1 D.R. Sisk T. A. Carlon M. R. Brambley R. S. Briggs August 2003 Prepared for the U.S. Department of Energy under Contract DE-AC06-76RL01830 DISCLAIMER This report was prepared as an account of work sponsored by an agency of the United States Government. Neither the United States Government nor any agency thereof, nor Battelle Memorial Institute, nor any of their employees, makes any warranty, express or implied, or assumes any legal liability or responsibility for the accuracy, completeness, or usefulness of any information, apparatus, product, or process disclosed, or represents that its use would not infringe privately owned rights. Reference herein to any specific commercial product, process, or service by trade name, trademark, manufacturer, or otherwise does not necessarily constitute or imply its endorsement, recommendation, or favoring by the United States Government or any agency thereof, or Battelle Memorial Institute. The views and opinions of authors expressed herein do not necessarily state or reflect those of the United States Government or any agency thereof. PACIFIC NORTHWEST NATIONAL LABORATORY operated by BATTELLE for the UNITED STATES DEPARTMENT OF ENERGY under Contract DE-AC06-76RL01830 Printed in the United States of America Available to DOE and DOE contractors from the Office of Scientific and Technical Information, P.O. Box 62, Oak Ridge, TN 37831-0062; ph: (865) 576-8401 fax: (865) 576-5728 email: reports@adonis.osti.gov Available to the public from the National Technical Information Service, U.S. Department of Commerce, 5285 Port Royal Rd., Springfield, VA 22161 ph: (800) 553-6847 fax: (703) 605-6900 email: orders@ntis.fedworld.gov online ordering: http://www.ntis.gov/ordering.htm This document was printed on recycled paper. (8/00) Final Report for the Energy Efficient and Affordable Small Commercial and Residential Buildings Research Program Project 2.5 – Pattern-Recognition based Fault Detection and Diagnostics Automated Diagnostics Software Requirements Specification Version 1.1 D. R. Sisk M. R. Brambley T. A. Carlon R. S. Briggs August 2003 Prepared for the U.S. Department of Energy under Contract DE-AC06-76RL01830 Pacific Northwest National Laboratory Richland, Washington 99352 ii i Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Revision History Date Version Description Author 7/31/2002 1.0 Initial version DR Sisk, MR Brambley, TA Carlon, RS Briggs 8/30/2003 1.1 Revised version with Boiler Diagnostics DR Sisk, MR Brambley, TA Carlon, RS Briggs Battelle Northwest, 2003 Page iii Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Battelle Northwest, 2003 Page iv Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Table of Contents 1. Introduction 1 1.1 Purpose 1 1.2 Scope 1 1.3 Definitions, Acronyms and Abbreviations 1 1.4 References 3 1.5 Overview 3 2. Overall Description 4 2.1 Product Perspective 4 2.2 Product Functions 5 2.3 User and Environment Characteristics 6 2.4 General Constraints 6 2.5 Use-Case Model Survey 7 2.5.1 Introduction 7 3. Requirements 8 3.1 Use-Case Specifications 9 3.1.1 Start and Stop Diagnostics Use Case 9 3.1.2 Browse Current Diagnostics Use Case 11 3.1.3 Browse Historical Diagnostics Use Case 12 3.1.4 Configure Diagnostics Use Case 14 3.1.5 Authenticate User 15 3.2 Functionality 16 3.2.1 General 16 3.2.2 Preprocessing 16 3.2.3 Diagnostic Process 19 3.2.4 Output Processing 30 3.3 Usability 30 3.3.1 User Interface 30 3.4 Supportability 31 3.4.1 Error Reporting 31 3.5 Interfaces 31 3.5.1 User Interfaces 31 3.6 Security 38 3.7 Other Requirements 38 4. Appendix A: Data Flow Diagrams of Diagnostic Processes for Chillers, Cooling Towers, and Chilled-Water Distribution 39 5. Appendix B: Chiller, Cooling Tower, and Chilled-Water Distribution Data Dictionary 122 6. Appendix C: Data Flow Diagrams for Boiler Diagnostic Processes 139 7. Appendix D: Data Dictionary for Boilers 163 Battelle Northwest, 2003 Page v Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Software Requirements Specification 1. Introduction This document specifies requirements for a computerized automated diagnostic tool for the detection of faults in certain heating, ventilation, and air-conditioning (HVAC) system components. The automated diagnostic tool is being developed for Architectural Energy Corporation (AEC) by Battelle as part of a program sponsored by the California Energy Commission (CEC). Supplemental cost-share funds are provided by U.S. Department of Energy through the Pacific Northwest National Laboratory (PNNL). 1.1 Purpose This Requirements Specification (RS) specifies the essential capabilities required of the automated diagnostic tool. The purpose of this document is to clarify for AEC, the California Energy Commission (CEC), the Office of Buildings Programs, Office of Energy Efficiency and Renewable Energy (EERN) of the U.S. Department of Energy, and the project team the results that must be achieved by the automated diagnostic tool. Any illustrative model presented in this document is used solely to explain the requirements and is NOT intended to address design or implementation issues. This SRS also specifies key AEC, CEC, and EERN requirements for project deliverables, including documentation. 1.2 Scope The automated diagnostic tool detects and identifies faults in chillers and cooling tower subsystems of HVAC units using sensed data acquired from the unit, unit specifications, unit installation and configuration data, and unit operation data (such as schedules). The tool is a software product that will be utilized primarily by building operators and facilities managers and only secondarily by HVAC service technicians, energy service providers, and operation supervisors. Building operators will use the tool to monitor units for which they are responsible, perhaps monitoring from a central control room within the building. Service technicians will utilize the product on site during repair and maintenance visits or off site between visits. Energy service providers, responsible for a number of customers and facilities, will use the product to monitor a number of units remotely, possibly in many different buildings, checking for inefficiencies and problems requiring dispatch of service personnel. Finally, building operator supervisors will use the tool to guide decisions on the assignment of operators and prioritization of work. The tool will provide the user with a visual indication of faults, descriptive information concerning the faults and their causes, and suggested corrective actions. The tool will store the results of diagnostics for subsequent retrieval and use. The software requirements described in this document are applicable to HVAC systems and associated subsystems. Such subsystems can include chillers, cooling towers, and boilers. However, the initial version of the tool will focus on diagnostics for chillers and cooling towers only. The tool will automate diagnostic processes hitherto performed through a visual analysis of graphical data by a human expert. The “Product Overview” section describes factors that affect the software and its requirements. The “Concept Example” appendix describes how the software would function in an example situation. 1.3 Definitions, Acronyms and Abbreviations Some of the following definitions are taken or adapted from IEEE Std 610.12-1990 (IEEE 1993a) and IEEE Std 830-1984 (IEEE 1993b). Battelle Northwest, 2003 Page 1 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Authenticate — the process by which the tool establishes the identity and privileges of the user by obtaining an identifier and password from the user and checking it against a database of predefined users. The user becomes authenticated when the identifier and password match one of the predefined users in the tool’s database. component — one of the parts that make up a software system. A component may be subdivided into other components [IEEE Std 610.12-1990]. Note: For the purpose of this specification, the term “component” will be used in preference to the term “module” diagnostic result — the output of the diagnostic processing. This can either be an identified fault condition or the confirmation of the absence of a fault condition. fixed data — data describing the characteristics of the unit under diagnosis, for example, specifications and design information, operating characteristics, set points, installation and configuration data, and operation data (such as schedules) that do not change on a regular basis. functional requirement — a requirement that specifies a function that a software system or software component must be able to perform [IEEE Std 610.12-1990]. In this requirements specification, functional requirements specify how the inputs to the software product should be transformed into outputs [IEEE Std 830-1984]. interface requirement — a requirement that specifies an external item with which a software system or software component must interact, or that sets forth constraints on formats, timing, or other factors caused by such an interaction [IEEE Std 610.12-1990] module — see component product — (for this document) a software system or software component- along with any necessary data and documentation- for which requirements are specified in a requirements specification requirement — (1) a condition or capability needed by a customer to solve a problem or achieve an objective; (2) a condition or capability that must be met or possessed by a software system or software component to satisfy a contract, standard, specification, or other formally imposed document; (3) a documented representation of a condition or capability as in (1) or (2) [adapted from IEEE Std 610.12- 1990] requirements specification (RS) — a document of the essential requirements (functions, design constraints, and attributes) of the software and/or hardware and their external interfaces [adapted from IEEE Std 610.12-1990] RS — requirements specification Battelle Northwest, 2003 Page 2 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Sensed data — data that are measured through electronic or mechanical detection. Typically this data varies at such a rate, e.g., in real time, hourly, daily, weekly, or is otherwise difficult to estimate or model such that an accurate characterization of it can only be gained through such detection. This data includes temperatures, pressures, electrical current, machine state, etc. software system — a collection of software components related in such a way as to produce a result greater than what their parts, separately, could produce subsystem — a discrete part of an HVAC system, e.g., chiller or cooling tower. unit — a complete HVAC system usability — the ease with which a user can learn to operate, prepare inputs for, and interpret outputs of a software system or software component [IEEE Std 610.12-1990]. 1.4 References The following are references supporting these specifications: 1.5 Overview Product Overview -- This section provides a descriptive overview of the automated diagnostic tool, its users and operating environment, and general factors that affect requirements. It lays the foundation for understanding the specific requirements that follow. Specific requirements are specified in the following categories: Category Descriptions Overall An overview of the expected product use and Description context including user characteristics, constraints, and assumptions. Functional describes the core capability and operating Requirements characteristics required of the diagnostic tool by the client. External includes general user interface requirements and Interface logical characteristics of interfaces between the Requirements automated diagnostic tool, data acquisition system, and data storage system. Specific user interface requirements are being developed independently as part of the Phase A Prototype. Security specifies requirements for safeguarding customer Requirements data Other includes special operations required by end users, Requirements and documentation requirements specified by the client. Battelle Northwest, 2003 Page 3 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Appendix A: Data Flow Diagrams of Diagnostic Processes for Chillers, Cooling Towers and Chilled Water Distribution provides diagrams showing the data flows and data-processing that lead from fixed data and sensed data to diagnostic conclusions. Appendix B: Data Dictionary for Chillers, Cooling Towers and Chilled Water Distribution provides a tabular listing of known system data corresponding to their use in Appendix A. Appendix C: Data Flow Diagrams for Basic Boiler Diagnostics provides diagrams and mini-specs showing data flows and data processing that lead from fixed data and sensed data to diagnostic conclusions. Appendix D; Data Dictionary for Boilers provides a tabular listing of all known system data elements corresponding to their use in Appendix C. 2. Overall Description The following overview of the automated diagnostic tool supplies context for the specific requirements presented in later sections. The purpose of this information is to make the specific requirements easier to understand. All specific requirements are numbered in later sections. 2.1 Product Perspective Currently, diagnostics on HVAC units and subsystems are performed largely on a manual basis. Sensed data, e.g., temperatures and pressures, are obtained from one or more data acquisition devices. These devices measure and store sensed data over periods of several days to several weeks. Prior to the diagnostic process, data from these devices is input to graphical display software for visual inspection by a human expert. The expert, relying on technical expertise and results of previous diagnostic experience, evaluates the condition of the unit and subsystems based on visual plots of the data. This process is depicted in Figure 1. Fixed Data Sensed Data Data Acquisition Devices (DADs) Automatic and user- Data Visualization defined plots Software (e.g. Enforma Diagnostic DADs Software) process (e.g. AEC Micrologger) Manual visual diagnostics Sensed Data process Preprocessing Output Diagnostic process results Client Figure 1. Current HVAC Diagnostic Process Battelle Northwest, 2003 Page 4 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 The process depicted in Figure 1 can be partitioned into three logical components. These components are delineated in the diagram by dashed lines and are the data-preprocessing component, the diagnostic component, and output component. The diagnostic tool described in this document will replace the current process with an automated one based on algorithms derived from expert practices. These algorithms operate without the need for data visualization or human expert input. Diagnostic results will be displayed to the user and stored for subsequent retrieval and analysis. For the purposes of this document, the automated diagnostic tool will be assumed to preserve the logical construction of the current process. This construction is depicted in Figure 2. Preprocessing Filtering, Averaging, etc. Diagnostic Process Output Processing Figure 2. Logical Construction of HVAC Diagnostic Process 2.2 Product Functions As previously stated, the functionality of the automated diagnostic tool can be partitioned into three logical components: the data preprocessing component, the diagnostic component, and the output component. The data-preprocessing component obtains data describing the subsystem under diagnosis and reduces, filters, and otherwise prepares the data for input to the diagnostic component. This data includes sensed data, e.g., temperatures, pressures, electrical current, machine state, etc., as well as fixed data describing the characteristics of the subsystem under diagnosis, for example, specifications and design information, operating characteristics and set points, etc. The data may be processed through averaging, trending, or other statistical analysis. Sensed data can originate from data acquisition hardware either in real time or at some arbitrary time after acquisition. Fixed data will generally be compiled prior to operation of the diagnostic tool and be obtained from permanent storage when needed. Specific requirements will be placed on the data-preprocessing component only with respect to types of data to be input and the format and interface requirements of this input. However, the component is described here to provide insight into the operation of the software. The diagnostic component will detect and identify faults in the operation of HVAC subsystems based on sensed and fixed data input from the data-preprocessing component. The diagnostic algorithms used for fault detection will be derived from current expert practices by AEC. The faults identified by the Battelle Northwest, 2003 Page 5 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 diagnostic will be enumerated and described under the functional requirements section. The output component will display and record results output from the diagnostic component. The results of the diagnostics will be displayed to the user in a simple, graphical and textual format. The results will also be stored to permanent storage for subsequent retrieval and analysis. 2.3 User and Environment Characteristics As previously stated, users of the automated diagnostic tool will include service technicians, energy service providers, building operators, and building operator supervisors. Installed platforms could include portable computers, handheld devices, and personal workstations in control rooms and offices. Installed platforms may communicate with the HVAC unit under diagnosis using wireless interfaces, direct point-to-point connections, or over Internet or local area network. Platform operating systems will be initially restricted to Microsoft Windows-compatible systems. The computer expertise of the user base could vary over a wide range. Some users could be quite sophisticated, others familiar with only the most rudimentary computer-based tasks. However, it is expected that all users will have a good fundamental understanding of HVAC units. Setting up and operating the automated diagnostic tool should require minimal user input. Service technicians are expected to use the software as often as their service tasks dictate, perhaps several times a day for periods up to about one hour, in close proximity to the HVAC unit and possibly out of doors. They may also set up the diagnostic tool to collect data continuously offsite at their offices and inspect the data periodically to identify faults or confirm proper operation. Building operators are expected to use the software on an occasional basis every day. The tool would collect data and process it continuously but the operators would only check the results periodically. They may view results for only a few seconds to check the status of equipment while passing through a control room or may sit at a monitor for several minutes more carefully inspecting the diagnostic results and other information available on the tool’s display. Energy service providers and building operator supervisors could potentially use the software in a more continuous mode, allowing it to operate undisturbed for many hours or days to record diagnostic results over a period of time. See the “Concept Example” appendix for a detailed example of how the automated diagnostic tool will be used. 2.4 General Constraints The automated diagnostic tool must support a wide variety of users with respect to computer expertise. In addition, different users will have different expectations for the tool with respect to data presentation and functionality. For instance, some users will simply require an immediate diagnostic result while other users may be interested in diagnostic results generated over an arbitrary time that can be subsequently reviewed. The tool must provide a capability to manually input and edit “fixed” data, i.e., data that does not vary in real-time. Such data includes HVAC unit set points, specifications, and configuration information. This data must be stored for subsequent use by the diagnostic tool for review and verification by other users and management. The tool should provide for configuration management of fixed data. Battelle Northwest, 2003 Page 6 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 The user must have the capability to configure the tool for continuous diagnostic analysis over an indefinite period of time. In this mode, the tool will record diagnostic results for subsequent review. No printed reports will be required of the tool, but the tool must print screen images of diagnostic results and historical data at user request and must provide long term storage of diagnostic results and permit the user to supply metadata relevant to the results, e.g., location, HVAC serial number, model number, user name, date, etc. The tool will not provide capability for additional user-defined analysis of the diagnostic results, results will be provided in a simple, final, definitive manner. However, the tool may provide the user the capability to adjust the sensitivity of the diagnostic algorithms to increase the probability of exposing typically undetected diagnostic events or concealing detected diagnostic events (including false detections). The tool will be capable of obtaining sensed data from a variety of sources. Such sources should include real-time data acquisition devices and data files containing previously acquired data. The current version of the tool will include diagnostic algorithms for cooling tower and chiller subsystems of HVAC units. However, the design of the software should support the incorporation of diagnostic algorithms for additional HVAC subsystems. In addition, the tool should support modification or replacement of existing diagnostic algorithms. The automated diagnostic tool will be restricted to Microsoft Windows-compatible operating systems. 2.5 Use-Case Model Survey This section provides an overview of the use case model that describes the operation of the user interface. Actual use cases that specifically define the operation of the user interface are presented in the requirements section. 2.5.1 Introduction The use case model consists of five use cases as depicted in Figure 3. The main actor in the use case model is the human user. This actor is generalized as “User”. The User can be further specified as a general user or administrator. The general user has no ability to modify system settings. The administrator user is able to modify certain settings. The use case “Start and Stop Diagnostics” describes the process by which the administrator user activates and ceases diagnostic processing. The use case “Browse Current Diagnostics” describes the process by which the user views current diagnostic results. The use case “Browse Historical Diagnostics” describes the process by which the user views historical diagnostic results. The use case “Configure Diagnostics” describes the process by which the administrator user adjusts diagnostic parameters used in the diagnostic process. The use case “Authenticate User” describes the process by which the user makes known to the tool the privileges to which they are entitled. Battelle Northwest, 2003 Page 7 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Automated Diagnostic Browse Historical Diagnostics Browse Current Diagnostics User Start/Stop <<include>> Diagnostic Authenticate User Configure Diagnostics <<include>> General User Administrator Figure 3. Use Case Model 3. Requirements The requirements in this document are organized according to the categories listed in Table 1. Table 1. Categories of Software Requirements Requirement Category General Description and Purpose Use-Case Specifications specify, in terms of use cases, the expected interactions and behavior of the software with respect to the defined actors. Functionality specify functions that a system or component must be able to perform — the fundamental software actions that transform inputs into outputs Battelle Northwest, 2003 Page 8 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Usability specify factors affecting how easily users can learn to operate a system or component, prepare its inputs, and interpret its outputs Supportability include requirements affecting how easily a system or component can be maintained to meet its original requirements or extended to meet modified requirements Interfaces specify requirements for user, hardware, software, and communication interfaces, as applicable. Security specify needs for protecting the software from accidental or malicious access, use, modification, destruction, or disclosure Other Requirements include special requirements that do not fit into previous categories 3.1 Use-Case Specifications This section describes the five main use cases describing the functionality of the user interface. These use cases are “Start and Stop Diagnostics”, “Browse Current Diagnostics”, “Browse Historical Diagnostics”, “Configure Diagnostics”, and “Authenticate User”. The use cases “Start and Stop Diagnostics” and “Configure Diagnostics” include the use case “Authenticate User”. 3.1.1 Start and Stop Diagnostics Use Case 3.1.1.1 Brief Description This use case provides the actor the means to start and stop diagnostic processing. The actor in this case is the administrator user (see 2.5.1). 3.1.1.2 Flow of Events The use case begins just prior to when the user launches the application. 3.1.1.2.1 Basic Flow – Start Diagnostics 1. The user launches the tool by double-clicking the icon associated with the tool or typing the application’s name. 2. The tool momentarily displays a splash screen identifying the tool, identifying developing and sponsoring organizations as appropriate, and listing copyright information. 3. The tool displays the main window of the tool. 4. The user starts the diagnostic processing by selecting a menu item named “Start Diagnostics” from a drop down menu named “Status”. 5. Include (Authenticate User). If the user has the appropriate privilege (i.e., the user is the administrator user) the tool requests a confirmatory response from the user to start the diagnostic processing. 6. If the user confirms the desire to start diagnostic processing, the tool starts the processing and displays Battelle Northwest, 2003 Page 9 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 an animated indication that diagnostic processing is active. 7. If the user responds negatively to the confirmation, the tool does not start the diagnostic processing but the user remains authenticated. 8. If the user does not have the appropriate privilege, the tool does not start the diagnostic processing. 9. The user secures the tool by selecting a menu item named “Logout” from the drop down menu named “File”. 10. The tool returns the current user’s privileges to those of the general user. 11. If a period of 15 minutes elapses whereby the user does not secure the tool, the users privileges will automatically revert to those of a general user. 3.1.1.2.2 Alternative Flow 3.1.1.2.2.1 Stopping Diagnostic Processing 1. The user can stop diagnostic processing at any time after the diagnostic processing has started by selecting the “Stop Diagnostics” menu item from the main menu entitled “Status”. 2. If the user is not authenticated as the administrator user, include (Authenticate User) to validate privileges for stopping diagnostic processing. 3. If the user has the appropriate privilege, the tool requests confirmation to stop diagnostic processing. 4. If the user responds positively to the confirmation, the tool stops diagnostic processing and indicates the stopped condition. Otherwise the software performs no function but the user remains authenticated. 5. If the user selects the “Exit” menu item from the main menu entitled “File” and the diagnostic processing is not active, the tool exits. 6. If the user selects “Exit” and the diagnostic processing is active, include (Authenticate User), if the user is not already validated, to verify the user’s privilege to stop diagnostic processing. 7. If the user is permitted to stop diagnostic processing, the tool stops the processing and exits. Otherwise, the software performs no function. 3.1.1.3 Special Requirements There are no special requirements for this use case. 3.1.1.4 Preconditions There are no preconditions for this use case. Battelle Northwest, 2003 Page 10 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.1.1.5 Postconditions There are no postconditions for this use case. 3.1.1.6 Extension Points There are no extension points for this use case. 3.1.2 Browse Current Diagnostics Use Case 3.1.2.1 Brief Description This use case provides the actor the means to view current diagnostic results. The actor in this case is the user (see 2.5.1). 3.1.2.2 Flow of Events The use case begins with the tool executing and displaying a list of buildings under diagnosis on the main (initial) window. 3.1.2.2.1 Basic Flow – Browse Current Diagnostics 1. The tool displays the main (initial) window, listing buildings under diagnosis. 2. The user selects a building of interest. 3. The tool displays the subsystems window, tiled on top the main (initial) window. 4. The user selects a subsystem of interest. 5. The tool displays the condition window, tiled on top the subsystems window. 6. The user selects a diagnostic of interest. 7. The tool displays the diagnostic information window for that diagnostic. 3.1.2.2.2 Alternative Flow 1. At any window except the initial window, the user may click the “Back” button to dismiss the current window and re-establish the previous window as the current window. The user may then make a new selection. 2. The user may click a button labeled “Print” on the diagnostic information window to print an image of the window. 3. The tool displays a window listing possible items to print including the diagnostic information window. 4. The user selects the diagnostic information window and clicks the “OK” button to print the window. 3.1.2.3 Special Requirements There are no special requirements for this use case. 3.1.2.4 Preconditions There are no preconditions for this use case. Battelle Northwest, 2003 Page 11 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.1.2.5 Postconditions The diagnostic processing will not cease or be negatively impacted during the activities of this use case. 3.1.2.6 Extension Points There are no extension points for this use case. 3.1.3 Browse Historical Diagnostics Use Case 3.1.3.1 Brief Description This use case provides the actor the means to view historical diagnostic results. The actor in this case is the user (see 2.5.1). 3.1.3.2 Flow of Events The use case begins with the tool displaying the diagnostic information window, itself displaying a description of a diagnostic of interest. 3.1.3.2.3 Basic Flow – Browse Historical Diagnostics 1. The user clicks the “History” button. 2. The tool displays the diagnostic history window depicting the historical results of the selected condition of interest over the default viewing period in the form of a color map. The window provides a scroll bar for scrolling through historical results if data are available prior to the default viewing period. The default viewing period extends backward one week prior to the current date. Sliding the scroll bar does not change the viewing period displayed. The default time resolution for the window is one hour. 3. The user slides the scroll bar backward or forward to view previous results up to the current time. 4. The tool displays the results within a viewing period of one week, adding results to the beginning or ending of the period while dropping results of the opposite end. The tool does not change the viewing period. 5. The user may close the diagnostic history window by clicking the “Close” button. 6. The tool dismisses the diagnostic history window and the diagnostic information window and makes the condition window the current window. 3.1.3.2.4 Alternative Flows 3.1.3.2.4.1 Changing the Viewing Period 1. The user selects a new viewing period from a list of periods provided by the tool. 2. The tool redisplays the historically data over the new viewing period. 3.1.3.2.4.2 Zooming 1. The user selects a period of time within the displayed viewing period over which to expand or contract in time. Battelle Northwest, 2003 Page 12 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2. The tool expands or contracts the selected period. If expanding, the selected period becomes the new viewing period. If contracting, the new viewing period becomes twice as long as the selected period and encloses it. 3.1.3.2.4.3 Displaying Historical Diagnostic Information 1. The user double-clicks a cell in the history window. 2. The tool dismisses the current diagnostic information window if displayed. After a noticeable delay of approximately one second, the tool displays the diagnostic information window associated with the cell selected. 3.1.3.2.4.4 Browsing Arbitrary History Intervals 1. The user specifies a start time and end time for an historical interval of interest using calendar controls. 2. The tool displays historical results beginning with the first result on or after the specified start time up to the end time. The view is confined to the previously selected viewing period. 3.1.3.2.4.5 General Alternative Flows 1. At the diagnostic information window, the user may click the “Close” button to dismiss the window and make the condition window the current window if the diagnostic history window is not displayed. 2. If the user attempts to close the diagnostic information window and the diagnostic history window is still displayed, the diagnostic information window is dismissed but the diagnostic history window remains. 3. If the condition window is closed, then both the diagnostic information and diagnostic history windows are closed if open. 4. If the user does not specify an end time for the history interval in 3.1.3.2.4.1 Browsing Arbitrary History Intervals (1), it defaults to the current time. 3.1.3.3 Special Requirements There are no special requirements for this use case. 3.1.3.4 Preconditions The diagnostic processing need not be active for this use case. A diagnostic information window must be displayed for this use case to begin. 3.1.3.5 Postconditions The diagnostic processing will not cease or be negatively impacted during the activities of this use case. Battelle Northwest, 2003 Page 13 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.1.3.6 Extension Points There are no extension points for this use case. 3.1.4 Configure Diagnostics Use Case 3.1.4.1 Brief Description This use case provides the actor the means to configure the diagnostic tool. This includes defining the buildings containing systems to be diagnosed, defining the systems themselves, specifying equipment setpoints, selecting diagnostic sensitivity, and modifying fixed data. The actor in this case is the administrator user (see 2.5.1). 3.1.4.2 Flow of Events The diagnostic tool is executing prior to the processing of this use case and only the main window of the tool is displayed. 3.1.4.2.5 Basic Flow – Configure Diagnostics 1. When presented with the main window, the user may select the “Configure Diagnostics” menu item from the menu entitled “File”. 2. If the user has not already been authenticated as the administrator user, include (Authenticate User). 3. If the user has the appropriate privilege, the tool displays the configuration window. 4. The user may click the “Recall” button to read previously saved changes from a disk file or database. 5. The tool populates the window with the data from the disk file. 6. The user makes the desired changes to the configuration and can click the button labeled “Save” to save the changes. Otherwise, the user can click the button labeled “Close”. 7. If the user clicks the button labeled “Save”, the tool will request confirmation to save the changes. 8. If the user confirms, the tool will request a name for the disk file in which to save the modified data to permanent storage. 9. The user will enter a name for the file or cancel the operation. 10. If the user enters a name for the file, the tool will save the changes. If the user cancels the operation, the tool will perform no function. 11. If the tool completes the save operation, the tool will ask the user if the changes are to be relayed to the diagnostic processing for immediate use. 12. If the user confirms the changes are to be relayed to the diagnostic processing, the tool relays the changes if the processing is currently active. Otherwise, the tool does not relay the changes. 13. If the user clicks the button labeled “Close”, the tool will request confirmation for the close and the potential loss of any changes. Battelle Northwest, 2003 Page 14 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 14. If the user confirms, the tool will dismiss the configuration window, ignoring any changes and returns the user to the main window. If the user rejects the initial desire to close, the tool will perform no function. 3.1.4.2.6 Alternative Flows There are no alternative flows for this use case. 3.1.4.3 Special Requirements There are not special requirements for this use case. 3.1.4.4 Preconditions The main window of the tool must be the only window active for the tool prior to execution of this use case. 3.1.4.5 Postconditions Any changes made by the administrator user to the diagnostic tool will take affect immediately if requested by the user. 3.1.4.6 Extension Points There are no extension points for this use case. 3.1.5 Authenticate User 3.1.5.1 Brief Description This use case establishes the privileges of the user for certain functions of the tool. 3.1.5.2 Flow of Events This use case begins when another use case requires its instantiation. 3.1.5.2.7 Basic Flow 1. The tool displays a window for entry of authenticating information, i.e., user name and password, to validate and establish the privileges of the user. 2. The user enters their user name and password. 3. The tool attempts to authenticate the user and indicates whether authentication has succeeded or not. 4. If authentication is unsuccessful, the user is returned to the authentication window to reenter the information. 5. The tool permits three attempts at authentication before dismissing the authentication window and returning the user to the previous window. 6. The user may cancel the authentication process at any time and return to the previous window. 3.1.5.2.8 Alternative Flows There are no alternative flows for this use case. 3.1.5.2.9 Special Requirements There are no special requirements for this use case. Battelle Northwest, 2003 Page 15 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.1.5.2.10 Preconditions There are no preconditions for this use case. 3.1.5.2.11 Postconditions There are no postconditions for this use case. 3.1.5.2.12 Extension Points There are no extension points for this use case. 3.2 Functionality This section describes the functional requirements of the software, that is, requirements describing the core functions the software must perform. This section begins with general requirements relevant to the tool as a whole. Subsequently, requirements are organized by the logical construction of the tool as data processing progresses from preprocessing to output processing. 3.2.1 General The following general requirements pertain equally to the logical partitions of the tool. 3.2.1.1 Users of the tool shall be classified into two types. The first type, general user, shall only be permitted to utilize a limited set of the capabilities of the tool. These capabilities are listed in Table 2. Typically a general user is only permitted to view the results of diagnostic processing either current or historical. The second type, administrator, shall be permitted all the privileges of the general user plus those identified in Table 2. The administrator is permitted all the privileges of the general user in addition to the privileges to configure the system and modify fixed data and diagnostic settings. Table 2 User Privileges General User Administrator Privileges Privileges Beyond General User’s Browse Current Start/Stop Diagnostics Diagnostics Browse Historical Configure Diagnostics Diagnostics Define sensed data input units 3.2.2 Preprocessing The automated diagnostic tool shall input sensed data in real time from data acquisition devices and the HVAC unit under diagnosis as well as from data files containing previously acquired data, though not simultaneously. In addition, the tool shall input fixed data provided by the user. Sensed and fixed data used by the tool in performing automated diagnostics shall be stored to permanent storage for post-analysis by the diagnostic process and viewing of the results. 3.2.2.1 The tool shall input sensed data in real time from data acquisition devices and the HVAC unit under diagnosis. The absolute time of input will be associated with each sensed data item for its complete lifecycle, including permanent storage. The time will be determined at the instant the acquisition of the sensed data is complete. Battelle Northwest, 2003 Page 16 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.2.2.2 The tool shall permit sensed data to be input from an electronic file, though not simultaneously with sensed data from external acquisition hardware. When inputting sensed data from an electronic file, only one file shall be used containing all necessary sensed data. The file shall be an ASCII text file containing only columns delimited by a single tab character or single comma. The file shall begin with a required header. The first column of the header will list, at a minimum, the entries “”Building Identifier” and “Input Identifier” in that order. Following columns on the Input Identifier row will list integer input identifiers. Following columns on the Building Identifier row will list corresponding integer building identifiers for the inputs. One or more comment rows may exist above and below these required rows. These comment rows are identified by a ‘#’ as the first character of the first column. These rows are ignored by the tool. The first uncommented column in the file after the required headers shall list the absolute time, in ascending order, associated with all entries in subsequent columns of the row. Each additional column in the file shall pertain to one and only one sensed parameter. Data values in the same row of the file correspond to identical time values. All columns in the file shall have the same number of rows. An example input file is presented in Table 3. When the tool is processing sensed data from an input file, the tool is considered to be operating in “batch mode”. Table 3 Example Input Data File Reflecting Specified Format #Test Run #Sensor Name Temperature Flow Pressure Building Identifier 1 1 2 Input Identifier 1 2 3 12/14/01 8:43 12.4 35.8 407.3 12/14/01 13:30 5.4 955.1 971.0 12/14/01 20:01 123.5 576.21 491.4 3.2.2.3 Each sensed data item will be qualified as to its certitude during the acquisition process. Sensed data will be considered in doubt if acquisition of the data was not possible (for example, if an error occurs during communication with the acquisition hardware), or the data is outside the range of possible values. Otherwise, the sensor value will be deemed accurately acquired. 3.2.2.4 The software will deem sensed data in doubt if acquisition of the data is not possible, due to communication failures, for a default number of successive samples. The default is dependent on sensor type. These default values are specified in Table 4. The number of successive samples for a given sensor type shall be modifiable by the administrator. Data not successfully acquired will be deemed “missing data”. Table 4 Default Number of Failed Successive Samples Indicating Sensor Data Acquisition Problem. Sensor Type Default Number of Failed Successive Samples Temperature 3 Current 3 Switch 3 Battelle Northwest, 2003 Page 17 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.2.2.5 Sensed data used in or supporting diagnostic analyses shall be saved to permanent storage. 3.2.2.6 The occurrence of missing data shall be indicated in permanent storage by a unique and obvious place holder or indicator, e.g., a null value or sequence of characters that cannot be confused with non- missing data. 3.2.2.7 Sensed data input to the tool shall be stored to permanent storage with a precision of three significant figures. 3.2.2.8 Sensed data input to the tool shall be validated with respect to its expected range of values. Sensed data shall be assigned the ranges listed in Table 5 by default. Table 5 Default sensed data expected ranges Sensor Expected Minimum Expected Maximum Value Value Ambient Temperature -40 F 130 F Ambient wet-bulb Temperature -40 F 100F Chilled Water Supply Temperature 30F 80F CT Sump Temperature 32F 130F CT Inlet Temperature 35F 130F Compressor Current (or Power) 0 NA, Chiller dependent Condenser Pump Current (or Power) 0 200 amps Chilled Water Pump Current (or 0 200 amps Power) Secondary Chilled Water Pump(s) 0 200 amps Current (or Power) Cooling Tower Fan(s) Current (or 0 200 amps Power) Condenser Fan(s) Current (or Power) 0 200 amps Supply Fan(s) Current (or Power) 0 1000 amps 3.2.2.9 The administrator shall have the capability to modify the expected range of sensed data against which the data will be validated. The engineering units of sensed data input to the tool shall comply with the units listed in 3.2.2.10 Table 6 for the associated physical parameter measured prior to input to the diagnostics. The tool shall provide the capability to convert sensed data not provided in the units listed in Battelle Northwest, 2003 Page 18 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Table 6 to the required units. Table 6. Required engineering units for sensed data. Physical Engineering Parameter Units for Sensed Data Temperature Degrees F Current Amps 3.2.2.11 The tool shall associate with each continuous parameter one or more tolerances each corresponding to a different sensitivity level for the tool. 3.2.2.12 Any and all errors associated with obtaining, validating, converting, or storing the sensed data shall be logged as described in subsequent specifications and selected errors shall be reported to the user. 3.2.3 Diagnostic Process The automated diagnostic tool shall detect and identify certain performance and operational faults in chiller and cooling tower subsystems of HVAC units following specified algorithms. In addition, the tool shall be designed to permit expansion of diagnostic analysis to additional subsystems. The faults identified and their causes and sources, shall be saved to permanent storage for subsequent analysis. 3.2.3.1 The tool shall monitor performance and operational parameters listed in Table 7 for chillers and cooling towers and identify the specific faults in the specific fault categories listed in the table. Table 7. Performance and Operational Parameters Monitored by the Automated Diagnostic Tool and Specific Faults Identified Subsystem(s) Monitored Parameter Fault Category Fault Chiller Chilled Water Supply Chilled Water Supply Temperature not The chilled water supply Temperature Maintenance Maintained Correctly temperature is too high The chilled water supply temperature is too low Chiller Schedule Chiller Schedule is Incorrect/in The chiller is on when it Error/Corrupt/Inefficient/not Followed should be off. Energy is being wasted. Battelle Northwest, 2003 Page 19 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Compressor Cycling Compressor Cycling is Abnormal The compressor is cycling on too frequently. It is not staying off for the minimum required off time. The compressor is cycling off too frequently. It is not staying on for the minimum required on time. Compressor and Condenser Fan Compressor is Improperly Interlocked The compressor is on while Interlock (for air-cooled with Condenser Fan the condenser fan is off. The condensers only) chiller cannot reject heat and this could damage the compressor The condenser fan is on while the compressor is off. The fan is running unnecessarily and wasting energy. Compressor and Condenser Compressor is Improperly Interlocked The compressor is on while Pump Interlock (for water- with Condenser Pump the condenser pump is off. cooled condensers only) The chiller cannot reject heat and this could damage the compressor. The condenser pump is cycling unnecessarily frequently. Repeated frequent cycling will shorten the life of the condenser pump. The condenser pump is turning on too much in advance of the compressor and wasting energy. Cooling Tower Cooling Tower Fan Cycling Cooling Tower Fan Cycling Problem The cooling tower fan is not staying off long enough during cycling. The cooling tower fan is not staying on long enough during cycling. Sump Temperature Control Sump Temperature is Improperly The cooling tower fan is off Controlled but should be on. As a result, the condenser water is not being cooled sufficiently. The cooling tower fan is on but it should be off. Energy is being wasted. Cooling Tower Approach Cooling Tower Approach Problem The cooling tower approach is greater than the Approach Benchmark provided in set up. Heat rejection from the cooling tower is less than expected. Battelle Northwest, 2003 Page 20 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Cooling Tower Fan Staging Cooling Tower Fan Staging Problem The Sump temperature is above the cooling tower fan “on” set point, but all cooling tower fans are not on. This indicates a problem with the fan staging and, as a result, the cooling tower is not maintaining the sump temperature as low as it should. A fan is on even though the sump temperature is below the “off” set point. This indicates a fan staging problem, and energy is being wasted. All cooling tower fans should be off. Cooling Tower Range Cooling Tower Range Problem The cooling tower range is below its benchmark. As result, heat rejection by the cooling tower is less than expected and the cooling tower is performing at less than its capacity. Chilled Water Supply Fan(s) and the Primary- Supply Fan(s) and the Primary-Loop The is possibly a problem Loop Loop Chilled Water Pumps Chilled Water Pumps are not Interlocked with the supply fan control. Interlock Properly This chilled water pump is being operated unnecessarily and is wasting energy. The chilled water pump should not operate unless at least one of the supply fans in an air handling unit served by the chilled water pump is on. Supply Fan(s) and the Supply Fan(s) and the Secondary-Loop Possible problem with Secondary-Loop Chilled Water Chilled Water Pumps are not Interlocked secondary chilled water Pumps Interlocked Properly. pump control—check to see if loads in the spaces served are being met for all supply fans that are part of air handlers served by this secondary chilled water loop and that is on when the secondary chilled water pump is off. Battelle Northwest, 2003 Page 21 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 The secondary chilled water pump and some of the supply fans that are served by it are not interlocked properly. This secondary chilled water pump is operating unnecessarily when all supply plans it serves are off and, as a result, is wasting energy. The secondary chilled water pump should not operate unless at least one of the supply fans in an air handler served by this pump is on. Secondary and Primary Loop Secondary and Primary Loop Chilled The secondary chilled water Chilled Water Pumps Interlock Water Pumps are not Interlocked pumps that are on are Properly wasting energy. Secondary chilled water pumps should only operate when the primary CHW pump is operating. Chiller/Cooling Cooling Tower Fan(s) and Cooling Tower Fan(s) and Condenser The cooling tower fan and Tower Condenser Pump Interlock Pump are not Interlocked Properly condenser pump are not interlocked properly. Energy is being wasted because the cooling tower fan should be off when the condenser pump is not operating. The interlock between the condenser pump and the cooling tower may not be properly implemented. The cooling tower fan may be off when the condenser pump is running, but this should not always be the case. Chiller/Water Compressor and Primary Chilled Compressor and Primary Chilled Water The primary chilled water Loop Water Pump(s) Interlock Pump(s) are not Interlocked Properly pumps are not interlocked properly with the compressor. The condenser pump is cycling on and off unnecessarily. Repeated frequent cycling will shorten the life of the pump. The compressor is not properly interlocked with the primary chilled water pumps. The chiller is operating without a load. Energy is being wasted and damage to the compressor may result. Battelle Northwest, 2003 Page 22 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 The compressor is not properly interlocked with the primary chilled water pumps. Water side economizing is not being used, and the primary chilled water pumps are cycling on too much in advance of the compressor and wasting energy. 3.2.3.2 With each fault identified in Table 7, the tool shall associate text describing the possible problem, causes, and a recommended fix. This text for each fault is listed in Table 8. Table 8 Text to Associate with Each Anomaly Detected Subsystem(s) Fault Category Fault/Possible Causes Fix Problem Chiller Chilled Water Supply The chilled water 1) Chilled water Temperature not Maintained supply temperature is supply temperature Correctly too high set point is set too high. 2) Chiller load exceeds capacity. The chilled water 1) Chilled water supply temperature is supply temperature too low set point is lower than necessary. Chiller Schedule is The chiller is on when it Incorrectly Incorrect/in should be off. Energy is specified schedule. Error/Corrupt/Inefficient/not being wasted. Followed Compressor Cycling is The compressor is 1) Incorrectly Abnormal cycling on too specified minimum frequently. It is not off time in the set- staying off for the up of this minimum required off diagnostic, 2) time. Incorrectly specified minimum off time in the control algorithm for the compressor, 3) a failed relay or mis-adjusted relay, for compressors having the minimum off time controlled by a relay. Battelle Northwest, 2003 Page 23 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 The compressor is 1) Incorrectly cycling off too specified minimum frequently. It is not on time in the set-up staying on for the of this diagnostic, 2) minimum required on Incorrectly time. specified minimum off time in the control algorithm for the compressor, 3) a failed relay or mis-adjusted relay, for compressors having the minimum on time controlled by a relay. Compressor is Improperly The compressor is on The compressor is Interlocked with Condenser while the condenser fan on while the Fan (for air-cooled is off. The chiller cannot condenser fan is off. condensers only) reject heat and this could The interlock damage the compressor between the compressor and condenser fan in the control code is not specified correctly or is overridden. The condenser fan is on The condenser fan while the compressor is is running while the off. The fan is running compressor is off. unnecessarily and This wastes energy. wasting energy. The interlock between the compressor and condenser fan in the control code is not specified correctly or is overridden. Compressor is Improperly The compressor is on The compressor is Interlocked with Condenser while the condenser on while the Pump (for water-cooled pump is off. The chiller condenser pump is condensers only) cannot reject heat and off. The interlock this could damage the between the compressor. compressor and condenser pump in the control code is not specified correctly or is overridden. Battelle Northwest, 2003 Page 24 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 The condenser pump is The Condenser cycling unnecessarily Pump is turning on frequently. Repeated and off tool frequent cycling will frequently. shorten the life of the condenser pump. The condenser pump is The Condenser turning on too much in Pump Maximum advance of the Start-Up time is not compressor and wasting specified correctly energy. or is overridden in the control code. Cooling Tower Cooling Tower Fan Cycling The cooling tower fan is 1) The timer that is Problem not staying off long intended to enough during cycling. eliminate short cycling is not working. 2) The “on” and “off” control set points for the cooling tower fan are too close to one another. The cooling tower fan is 1) The timer that is not staying on long supposed to enough during cycling. eliminate short cycling is not working properly. 2) The "on" and "off" control set points for the fan are too close to one another. 3) The cooling tower capacity is too great for the load, so the fans rapidly cycle off (i.e., the on time is very short) because the load is met quickly. Sump Temperature is The cooling tower fan is 1) a cooling tower Improperly Controlled off but should be on. As control problem, 2) a result, the condenser sump temperature water is not being cooled sensor problem, 3) sufficiently. electrical problems such as a motor failure, 4) other problems with the fan motor. Battelle Northwest, 2003 Page 25 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 The cooling tower fan is 1) a cooling tower on but it should be off. control problem, 2) Energy is being wasted. an actuator or relay has failed. Cooling Tower Approach The cooling tower 1) The cooling Problem approach is greater than tower media is the Approach fouled due to Benchmark provided in mineral deposits or set up. Heat rejection ambient dirt, dust, or other from the cooling tower is contaminants. less than expected. 2) Restricted airflow for other reasons (e.g., piece of cardboard stuck over part of cooling tower air inlet). 3) There is condenser pump fouling, pipe fouling, or other restrictions on the water side. Cooling Tower Fan Staging The Sump temperature is 1) Different values Problem above the cooling tower of the fan “on” set fan “on” set point, but all point are specified cooling tower fans are in the fan controller not on. This indicates a and this software. problem with the fan 2) Fan staging staging and, as a result, control algorithm is the cooling tower is not not correctly maintaining the sump specified. 3) A fan temperature as low as it motor or electrical should. connection has failed. 4) The sump temperature sensor has failed or is out of calibration. A fan is on even though 1) Different values the sump temperature is of the fan “off” set below the “off” set point are specified point. This indicates a in the fan controller fan staging problem, and this software. and energy is being 2) Fan staging wasted. All cooling control algorithm is tower fans should be not correctly off. specified. 3) The sump temperature sensor has failed or is out of calibration. Battelle Northwest, 2003 Page 26 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Cooling Tower Range The cooling tower range 1) Tower media Problem is below its benchmark. may be fouled due As result, heat rejection to mineral deposits by the cooling tower is or ambient dirt, dust, or other less than expected and contaminants. the cooling tower is 2) the airflow is performing at less than restricted by some its capacity. other obstruction. 3) The condenser pump is fouling, pipes are fouling, or there are other water-side flow restrictions. 4) The cooling tower is too small for the load (i.e., there is a design problem) Chilled Water Supply Fan(s) and the The is possibly a The chilled water Loop Primary-Loop Chilled Water problem with the supply pump is off and the Pumps are not Interlocked fan control. supply fan for at Properly least one air handler served by this pump is on. There may be a problem with the control of this supply fan or other parts of the air handlers with supply fans operating under these conditions. This chilled water pump Improper interlock is being operated between the chilled unnecessarily and is water pump and the wasting energy. The supply fans. chilled water pump should not operate unless at least one of the supply fans in an air handling unit served by the chilled water pump is on. Battelle Northwest, 2003 Page 27 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Supply Fan(s) and the Possible problem with Improper interlock Secondary-Loop Chilled secondary chilled water between the Water Pumps are not pump control—check to secondary chilled Interlocked Properly. see if loads in the spaces water pump and the served are being met for supply fans of air all supply fans that are handlers it serves. part of air handlers served by this secondary chilled water loop and that is on when the secondary chilled water pump is off. The secondary chilled Improper interlock water pump and some between the of the supply fans that secondary chilled are served by it are not water pump and the interlocked properly. supply fans of air This secondary chilled handlers it serves. water pump is operating unnecessarily when all supply plans it serves are off and, as a result, is wasting energy. The secondary chilled water pump should not operate unless at least one of the supply fans in an air handler served by this pump is on. Secondary and Primary Loop The secondary chilled Improper interlock Chilled Water Pumps are not water pumps that are on between the Interlocked Properly are wasting energy. secondary chilled Secondary chilled water water pump and the pumps should only supply fans of air operate when the primary handlers it serves. CHW pump is operating. Chiller/Cooling Cooling Tower Fan(s) and The cooling tower fan The cooling tower Tower Condenser Pump are not and condenser pump are fan and condenser Interlocked Properly not interlocked properly. pump are not Energy is being wasted interlocked because the cooling properly. tower fan should be off when the condenser pump is not operating. Battelle Northwest, 2003 Page 28 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 The interlock between The cooling tower the condenser pump and fan and condenser the cooling tower may pump may not be not be properly interlocked implemented. The properly. cooling tower fan may be off when the condenser pump is running, but this should not always be the case. Chiller/Water Compressor and Primary The primary chilled The chilled water Loop Chilled Water Pump(s) are water pumps are not pump is cycling not Interlocked Properly interlocked properly with between on and off the compressor. The while the condenser pump is compressor is off. cycling on and off The primary chilled unnecessarily. Repeated water pumps are not frequent cycling will interlocked properly shorten the life of the with the pump. compressor. The compressor is not The compressor is properly interlocked running while the with the primary chilled primary chilled water pumps. The water pumps are not chiller is operating operating because without a load. Energy the compressor is is being wasted and not properly damage to the interlocked with the compressor may result. primary chilled water pumps. The compressor is not The primary chilled properly interlocked water pumps are with the primary chilled cycling on too much water pumps. Water in advance of the side economizing is not compressor turning being used, and the on. primary chilled water pumps are cycling on too much in advance of the compressor and wasting energy. 3.2.3.3 The tool shall be designed to permit the addition of diagnostic algorithms for other subsystems of HVAC units. 3.2.3.4 A diagnostic algorithm shall not process if any input data to the algorithm is missing. The user shall be notified if a diagnostic algorithm cannot process due to missing data. Battelle Northwest, 2003 Page 29 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.2.3.5 Any and all errors associated with failures of the diagnostic algorithms shall be logged as described in subsequent specifications and selected errors shall be reported to the user. 3.2.3.6 The tool shall monitor the unit under diagnosis, either in real time or batch mode, for an indefinite period of time or until input data are no longer available, and log diagnostic results as they are determined. 3.2.3.7 Diagnostic results that are saved to permanent storage shall be accompanied in storage by the absolute time of occurrence, the identity of the unit to which the diagnostic applies, and the identity of the diagnostic. 3.2.3.8 The administrator user shall have the capability to adjust the sensitivity of the diagnostic analysis in order to increase or decrease the probability of fault detection. 3.2.4 Output Processing The automated diagnostic tool shall display and record diagnostic results. Diagnostic results to be displayed to the user will be done so in a simple, graphical and textual format. Diagnostic results shall also be saved to permanent storage for subsequent retrieval, display, and analysis. 3.2.4.1 The administrator shall have the ability to specify which diagnostic results will not be reported in any manner, i.e., not detected. 3.2.4.2 The display of each diagnostic result for fault conditions will include a description of the fault, potential causes of the fault, the location of the fault, and the absolute time of occurrence. 3.3 Usability This section describes requirements related to the usability of the tool. 3.3.1 User Interface The following specifies usability requirements for the user interface. Battelle Northwest, 2003 Page 30 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.3.1.1 The area on the main, systems, and condition windows sensitive to the users selection device, typically the mouse, shall include the line surrounding the item of interest over the entire width of the window. This includes the diagnostic indicators. 3.3.1.2 The windows listing diagnostic results shall increase in height as needed to display entries up to a maximum of ten entries. Once the window has reached maximum size and there are additional items to display, the window shall deploy a scroll bar to permit the user to scroll through the additional entries. In this event, a summary set of diagnostic indicators shall appear above (below) the top (bottom) entry in the display. This set(s) of indicators shall summarize diagnostic indicators not currently appearing on the list above (below) it. An indicator in the summary set shall be active if any similar indicator not appearing above (or below) it is active. The summary set indicators comply with the same specification for activation as other indicators (see 3.5.1.39). 3.3.1.3 The building, subsystems, and condition windows shall display the current time if the diagnostic tool is operating in real time. If the tool is operating in batch mode, the time displayed will be the time associated with the entry currently being processed in the batched input. 3.3.1.4 If only a single building is defined, the subsystems window shall become the main window of the application and shall have all the functionality of the main window as described in these specifications. 3.3.1.5 Each window of the diagnostic tool shall display an animated graphical feature indicating the status, whether active or not, of the diagnostic processing. 3.3.1.6 The subsystem window shall be modal to the building window, the condition window modal to the subsystem window, and the diagnostic history and diagnostic information windows shall be modal to the condition window. 3.4 Supportability This section describes requirements related to the support of the software after initial installation. 3.4.1 Error Reporting Significant errors in software operation shall be logged to permanent storage with sufficient detail to guide the administrator and to assist support staff in locating and rectifying the error. In addition, selected errors shall be reported to the user. 3.4.1.1 Software errors logged to permanent storage shall include the absolute time of occurrence, the name of the software module in which the error occurred, the name of the software function in which the error occurred, and a description of the error. 3.5 Interfaces This section describes requirements related to interfaces of the tool. 3.5.1 User Interfaces This section describes the specifications for the user interface. 3.5.1.1 The user interface shall consist of six windows: Main window, configuration window, subsystems window, condition window, diagnostic information window, and diagnostic history window. 3.5.1.2 These windows shall be organized in a hierarchy enforcing a navigational order on the user. This hierarchy is depicted in Figure 4. As indicated in the figure, the main window is at the top of the hierarchy Battelle Northwest, 2003 Page 31 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 and is the first window that appears when the tool begins execution. The configuration window is subordinate to the main window and can only be displayed by a user selection on the main window. The third window in the hierarchy is the subsystems window and it can only be displayed by a user selection on the main window. The fourth window in the hierarchy is the condition window and it can only be displayed by a user selection on the subsystems window. The fifth window is the diagnostic information window. This window can only be displayed by a user selection on the condition window or by a user selection on the diagnostic history window if it is displayed. The diagnostic history window can only be displayed by a user action on the diagnostic information window. Main (Initial) Window Configuration Window Directed arrows Vertical arrangement Subsystems indicate possible reflects hierarchy Window navigational paths Condition Window This path valid only if diagnostic history window not displayed. Diagnostic Diagnostic Information History Window Window Figure 4 User Interface Window Hierarchy 3.5.1.3 The main (e.g., initial or default) window shall list buildings monitored and summarizing the current diagnostic status of all contained monitored units. A recommended layout for this window is presented in Figure 5. This window shall be titled “Diagnostician”. Battelle Northwest, 2003 Page 32 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Diagnostician October 18, 2001 2:20pm Not OK OK Building 1 Building 2 Building 3 Building 4 Building 5 Figure 5 Recommended Layout for Main Window 3.5.1.4 The main window shall have main menus entitled “File” and “Status”. 3.5.1.5 The main menu entitled “File” shall contain the following menu items in the following order: “Configure Diagnostics”, “Logout”, “Exit”. 3.5.1.6 The main menu entitled “Status” shall contain the following menu items in the following order: “Start Diagnostics”, “Stop Diagnostics”. 3.5.1.7 The menu items named “Configure Diagnostics” and “Exit” in the main menu entitled “File” shall be enabled at all times. 3.5.1.8 The menu item named “Logout” in the main menu entitled “File” shall be enabled only if the current user is presently authenticated as the administrator user. Otherwise, this menu item shall be disabled. 3.5.1.9 The menu item named “Start Diagnostics” in the main menu entitled “Status” shall be enabled only if diagnostic processing is not currently running. Otherwise, the menu item shall be disabled. 3.5.1.10 The menu item named “Stop Diagnostics” in the main menu entitled “Status” shall be enabled only if diagnostic processing is currently running. Otherwise, the menu item shall be disabled. 3.5.1.11 Selecting the “Configure Diagnostics” menu item of the main menu entitled “File” shall display the configuration window, making it the current window, modal to the main window. 3.5.1.12 The configuration window shall permit the administrator user to modify the following parameters: a. The password for the administrator user. b. A toggle enabling or disabling the main window of the tool as a screen saver. c. A toggle enabling or disabling the main window’s position on the screen as the top most window. d. Buildings and subsystems to be monitored and the conditions they will be monitored Battelle Northwest, 2003 Page 33 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 for. The conditions will be selected from a list provided by the tool. e. The enabled state of individual conditions. Disabled conditions will not be processed or displayed. f. The sensitivity of each condition by selecting a sensitivity from a list provided by the tool. g. Scale factors for transforming the engineering units of sensed input data to the required units. h. The expected range of sensed input data. 3.5.1.13 The configuration window shall display the following non-modifiable information: a. 3.5.1.14 The configuration window shall have a button labeled “Save” that when clicked will present the user with a window by which to enter a disk file or database name in which to save the modifiable data in the window. Entering a file name shall cause the permanent storage of the modified parameters and their immediate use by the diagnostic operations after confirmatory responses by the user. If the user does not confirm the request to save, it will not be performed. If the user does not confirm the request to relay the modified parameters to the diagnostic processing immediately, it will not be performed. In either event, the configuration window will remain displayed. 3.5.1.15 The configuration window shall have a button labeled “Close” that will dismiss the configuration window and return the user to the main window. If the user has made changes to data in the configuration window, the tool will request confirmation of the user’s desire to dismiss the window. If the user does not confirm the request, the window will not be dismissed. 3.5.1.16 The configuration window shall have a button labeled “Recall” that will permit the user to recall a disk file of previously saved parameters from which to populate the configuration window. When functioning as a screen saver, the window shall change location on the screen periodically and will continue to be updated by diagnostic results. 3.5.1.17 The subsystems window shall list subsystems monitored for a specific building and summarizing the current diagnostic status of all monitored subsystems. A recommended layout for this window is presented in Figure 6. Diagnostician - Building 2 October 18, 2001 2:20pm Not OK OK Chiller 1 Cooling Tower Chiller 1/Cooling Tower Interactions Water Loop Close Figure 6 Recommended Layout for Systems Window Battelle Northwest, 2003 Page 34 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.5.1.18 The condition window shall list the current status of all diagnostics for a specific subsystem. A recommended layout for this window is depicted in Figure 7. Diagnostician - Building 2, Chiller 1 October 17, 2001 9:00am Not OK OK Chiller 1 Chiller Schedule Chilled Water Supply Temperature (CHWST) Compressor Interlock/Fan Compressor Interlock/CHW Pump Compressor Interlock/Condenser Pump Compressor Off Cycle Close Figure 7 Recommended Layout for Condition Window 3.5.1.19 The diagnostic information window shall provide a detailed description of the diagnostic. A recommended layout for this window is depicted in Figure 8. Diagnostician Detail - Building 2, Chiller 1 October 17, 2001 9:00am Chilled Water Supply Temperature: Possible Problem: The chilled water supply temperature is too high. Causes: 1) Chilled water supply temperature set point is set too high. 2) Chiller 1 load exceeds capacity. Fix: 1) Adjust chilled water supply set point appropriately. 2) Estimate load from the temperature difference between chilled water supply temperature and chilled water return temperature and the chilled water loop flow rate. Print History Reset Close Figure 8 Recommended Layout for Diagnostic Information Window Battelle Northwest, 2003 Page 35 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.5.1.20 The diagnostic information window shall have a button labeled “Print” that when clicked will display a window listing items to print including the diagnostic information window, the history window, and both the diagnostic and history windows. The user selects the item of interest and clicks the “OK” button to print the selection, an image(s) of the item(s) selected. 3.5.1.21 The diagnostic information window shall include the following information regarding the diagnostic: 1. A description of the possible problem. 2. Potential causes. 3. Fixes. 3.5.1.22 The diagnostic information window shall have a button labeled “Close” that shall dismiss the window. 3.5.1.23 The diagnostic information window shall have a button labeled “History” that when clicked will display the diagnostic history window and display the previous week’s diagnostic results. 3.5.1.24 The diagnostic history window shall display historical diagnostic results for a specific diagnostic. A recommended layout for this window is depicted in Error! Reference source not found.. This figure includes a color map that provides a graphical indication of diagnostic condition. Diagnostician History - Building 2, Chiller 1- Chilled Water Supply Temperature Hour of Day 24 21 18 15 12 9 6 3 0 10/14 10/15 10/16 10/17 10/18 10/19 10/20 10/21 S M T W TH F S S Print Close Figure 9 Recommended Layout for Diagnostic History Window Battelle Northwest, 2003 Page 36 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.5.1.25 The diagnostic history window shall provide user selections for start times and end times for the history interval. These selections shall be in the form of a calendar control. 3.5.1.26 The smallest time interval displayed by the diagnostic history window is one week. 3.5.1.27 The longest time interval that may be displayed by the diagnostic history window is two years. 3.5.1.28 The color map of the history window shall indicate confirmed faults with the color red, potential faults with the color yellow, normal conditions with the color green, and periods when diagnostic processing was not active with the color gray. Diagnostic processing should be assumed inactive between periods of time when no confirmed fault, potential fault, or normal condition has been recorded. 3.5.1.29 The vertical axis of the color map of the history window shall indicate hour of the day and the horizontal axis shall indicate the absolute date and the day of week. 3.5.1.30 The diagnostic history window shall have a button labeled “Print” that when clicked will display a window listing items to print including the diagnostic information window, the history window, and both the diagnostic and history windows. The user selects the item of interest and clicks the “OK” button to print the selection, an image(s) of the item(s) selected. 3.5.1.31 The diagnostic history window shall have a button labeled “Close” that will dismiss the window. 3.5.1.32 The subsystems window, condition window, and diagnostic information window shall display a title that indicates its specific location or absolute path in the navigation hierarchy of windows. This title shall be a concatenation of the title of the previous window displayed, not including the diagnostic history window, and the name of the entry selected to obtain the current window. The two parts of the title shall be separated by a dash surrounded by a single space. 3.5.1.33 The main window, subsystems window, condition window, and diagnostic information window shall display the appropriate time below the title as specified in 3.3.1.3. 3.5.1.34 The main window, subsystems window, and condition window shall have three diagnostic indicators for each item listed. 3.5.1.35 One indicator shall be active when no diagnostic conditions exists. This indicator shall be designated the “OK” indicator and shall appear green when active. 3.5.1.36 One indicator shall be active when a potential diagnostic condition exists. This indicator shall be designated the “Caution” and shall appear yellow when active. 3.5.1.37 One indicator shall be active when a confirmed diagnostic condition exists. This indicator shall be designated the “Not OK” indicator and shall appear red when active. 3.5.1.38 Only one indicator shall be active at a given time for a specific diagnostic and no indicators shall flash when active. 3.5.1.39 The diagnostic indicators on the main window and subsystems window shall summarize all diagnostic conditions associated with each entry in the window. In general, an active “OK” indicator indicates no positive diagnostic results currently exist within the building or subsystem, as applicable for the window. An active “Caution” indicator indicates that at least one potential problem currently exists within the building or subsystem, as applicable, and no confirmed problem currently exists. An active “Not OK” indicator indicates at least one confirmed problem exists regardless of whether cautionary or Battelle Northwest, 2003 Page 37 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 non-positive results exist. Essentially, confirmed problems override potential problem indications which override non-positive results. 3.6 Security Certain functions of the tool directly available to the user require the user to possess supplementary privileges associated with performing these functions. These supplementary privileges are possessed by the administrator user and are in addition to those of the general user as described in 2.5. The tool determines the type of user by requesting an identifier and password from the user. The requirements related to this process are discussed in other requirements in this document. 3.7 Other Requirements The tool shall log to permanent storage the occurrence of changes to the fixed data. The log shall indicate the time and date of the change, original value of the item(s) changed, and the new value of the item(s) changed. Battelle Northwest, 2003 Page 38 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 4. Appendix A: Data Flow Diagrams of Diagnostic Processes for Chillers, Cooling Towers, and Chilled-Water Distribution Battelle Northwest, 2003 Page 39 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 Context Diagram Diagnose Chiller/Cooling Tower Metered and Fixed Equipment Data 0.0 Diagnose Chiller/ Cooling Tower Identification of Condition Battelle Northwest, 2003 Page 40 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 0.0 Diagnose Chiller/Cooling Tower Metered and Fixed Equipment Data 3.0 Determine Equipment Status Chiller Equpment Cooling Tower Status Equipment Status Fixed Fixed Shared Equpment Cooling Tower Chiller Data Status Data Data 2.0 1.0 Diagnose Diagnose Chiller Cooling Tower Chiller Condition Cooling Tower Condition Battelle Northwest, 2003 Page 41 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 0.0 Diagnose Chiller/Cooling Tower CHW P C C um u o r n p r d e s e nt n ( s o e r r P P o u w m e p r) s C C o u M n rr d e o e n to n t r s ( o e R r r - a P P t o u e w m d e p r s ) R C a ( o o te m r M d P p o o C r t e w o u s e r r s r r o ) e r nt Motor Rated Condenser Compressor P Cu C rre H n W t ( o P r u P m C o p w u s r e r r e ) nt (or Power) Pumps P C ( o o C m r u p P r r r o e e w s n s e t o r) r Pu C m H p W s P Su p R p a ly te d F a c n u r M re o n t t ors Secondary CHW Pumps 3.0 (or Power) Motor Rated Current Supply (or Power) Determine Fans P Secondary CHW Supply Fans Pumps P Equipment Current (or Power) Secondary Condenser Cu r C re H n W t ( o P r u P m o p w s er) Status Condenser Curren t F ( a o n r s Power) CHW Transient Fans P Decrease Factor Condenser Fan Motors Rated current (or Power) CT Fan Motors Rated current (or Power) CT Fans P CT Fans Secondary Current (or Power) CHW Pumps Status CHW St C { a P t o u u n s m de p n s ser Sup S p ta ly tu F s ans Conde S ns ta e t r u P s umps Fans Compressor Ambient Status State C H P W oi n S t et E C T v C I n H r a A H i t W l g e u l W a g r a S r v S e t T m i a r T o l A H n l i a g C r h m T H r W ig S g T e T r A e L m la o r O p w m e A r T atur C e HWST Com St p a r t e u s s sor C S T ta F t a u n s s CHWd C D H o W wn dUp Tem Am O pe A b r i T a e t n u t re B C e T n c R h a m ng a e rkTem CT p e In ra le tu t reS C u T mp CT Fans "On" Temp Setpoint Rejected CT Chiller Ambient Fans Current When Schedule CHWST wb Temp Condenser Pumps are "Off" E W co a n t o er m -s iz id in e g 1.0 CT S F e a t n p s o i " n O t ff" Rejected CT Range for Chiller CHWST CT Fans Status Off and/or Con T d y e p n e ser Diagnose Alarm Min. CT Fans On Time 2.0 C S T u m Fa p n T s e " m O p n B " e S l e o t w p o th in e t C M H ax W S P ta u r m t-U p p s Chiller Too C - H H W ig S h T D M ev e i a a n tion Min. CT Fans Off Time Diagnose Temp R P e o je in c t t s e d fo A r m Fa b n ie s n S t t w a b tus Off Time CHWST Mean and/or for Sump Temp Below P C u o m nd p e s n M se a r x Too-Low D R e e v j i e a c ti t o e n d CHWST Current Time Cooling Rejected CT A th p e p r C o T a c F h a a n n s d " A O m n" b i S e e n t t point S C ta o M r O m t i - n n U p i T r m p e i m T u s i s e O m m o n C r e C C o o y m M O c m i p f n l f e p r i T e m r O i e s m u s K s m s e o /n o r o C r t o O O m ff K p C / S r n e y C o c o s c h k h s t l e / i e n o l d l o r e u r I l t e n t C S er H e P l c o W ri o c m k n P a d u O r I a y n m K r S t C y p e / S u n / r H s e p l o o W c p t c o l k y P n I d n u O F S a m t C a K e r u n H p y r / p n l s s o W p o / c l t y k P u O F m a K n / p n s s o / i t P n C t u e C m o r o l m o p n W c s p d C F k e i r t O a e e o n h I d n s n m s K s C s e t w / p e o n r o O i r r r o t n e l h K o t d s c / N s e n k o R n o o r s n e t e j - e S r c P te t C u i e w a n m o d d t i m e t y p O h r f s p l o C o A r r C c O H e T N k s H W K C f e o s o W H / d S o n n r W T r - o S t S t T eady C C T O T O A K R K p / a / N p N n r o o o g t t a e ch S C u T C O m O o C K p K n y / / N t T c N ro e l o i o m l n t t g p C S O t T K a F g / C N a in T n o g F s t ans/ R W P e u h je m e c w n T p t e b s C d o T o a e A r n e m d m w " e p b O n i s e f e f e n " r t r Pu R R C m a e o n p j n e g s c d e a t e e W r n d e s h C " e e O T r n ff" Re P je C S u c T o t B C m t e a n e o m e t p d d u w n l W S e s p o s d A b u n w h a e W O m m s R T n e r R e t e f h e e n s b p h f r e e m j e i e " e T a C e j P n r O e c p n n e C u o c A t f d m t m T e n P t f m e / " w d d o p o p F d b e r b i s a W C n n i C f n e t T a o s h T s s n r r e e e t f A " r n C o w O " p P r T O b n p u C f S " r m f T T o " u S e a p m F e m c s a t h p p p n a o a s r T e i n e n d m " t O p ff" Condenser Rejected Sump Pumps Interlock Temp When OK/Not Condenser Pumps are "Off" Battelle Northwest, 2003 Page 42 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.0 Diagnose Chiller Minimum Compressor Chiller 1.1 Off Time Schedule Diagnose Sc C h h e il d le u r le Minimu O m n C T o i m m p e ressor D C ia 1 h g . i n 6 ll o e s r e Performance Performance Sc C h h e i d lle u r le Diag 1 n .3 ose Compressor inputs (Placeholder) Assessment ok/not Chiller On Cycle OK/not Cycling Compressor Off Cycle OK/not Compressor Status Supply Compressor Fans Status interlockedCompressor Interlock Condenser with CHW With Condenser Fans Status Pumps OK/not Fans OK/not Secondary CHW Compressor Pumps Status interlocked with CHW Condenser CHWST CHWST Mean Pumps Status Pumps OK/not Supply Fans/ Alarm Too-High Deviation CHW Pumps CHWST CHWST Mean Condenser Pumps Interlock OK/not Ambient Too-Low Deviation Status Supply Fans/ Temperature Rejected CHWST 1.5 Secondary OAT 1.2 for Non-Steady Diagnose CHW Pumps Check CHWST Interlocks Interlock OK/not Chilled Rejected OAT CHWST Alarm Water for Non-Steady Trigger Low Control CHWST Water-side Secondary/Primary CHWdDown Economizing CHW Pumps Interlock OK/not C T H ri W g E g S v C e a T r H l u A H W a l i a t g S i r o h T m n A In la te rm rvalCom S p t r a e t s e so C r H P W o C i n H S t W et dUp Co C n T h d y i e l p l C M n e e H s r a e x W T r S i P m ta u e r m t-U p p s C M U o P a n p u x d m T e S i n p t m a s s r e e t- r Battelle Northwest, 2003 Page 43 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.1 Diagnose Chiller Schedule Compressor Status 1.1.1 Evaluate Compressor Power vs. Time Chiller Chiller Schedule Schedule ok/not Battelle Northwest, 2003 Page 44 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.1.1 Evaluate Compressor Power vs. Time Compare the current time to the scheduled time for the chiller to be on., If the current time is a scheduled chiller "on" time, then stop--make no further check. OK. If the current time is outside the scheduled chiller "on" times (i.e., the chiller should be off), then check if the Compressor Status = "Off." If the Compressor Status = "Off," then the chiller is off as it should be and it is OK. Set Chiller Schedule OK/Not = "OK". If the Compressor Status = "On," then the Chiller is "On" when it should be off. Not OK. Energy is being wasted. Set Chiller Schedule OK/Not = "Not OK" Note: The purpose of this process is to determine if the chiller is on when it is supposed to be off. Ref. File: 1.2 Chiller schedule diagnostics.doc Battelle Northwest, 2003 Page 45 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.2 Check Chilled Water Control CHWST CHWST Steady State CHW Ambient Temperature 1.2.1 CHWST Filter for Alarm Compressor Compressor State CHWST Mean State Too-High Deviation CHWST Alarm 1.2.2 Trigger Low Evaluate Steady-State Rejected CHWST CHWST CHWST Alarm CHWST Mean Rejected OAT for Non-Steady Trigger High Control Too-Low Deviation CHWST for Non-Steady CHWST CHWST Alarm Evaluation Interval CHWdDown CHW Set Point CHWdUp Battelle Northwest, 2003 Page 46 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.2.1 Filter (pass) CHWST Steady State "On" Only If Compressor State = "Steady", then pass values of CHWST. Label these passesd values CHWST Steady State CHW. If Compressor State = "Transient" or Compressor State = "Off", then reject values of CHWST. Battelle Northwest, 2003 Page 47 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.2.2 Evaluate Steady-State CHWST Control CHWST Mean Too-High Deviation CHWST Steady State CHW CHWST Mean CHWST Deviation Too-Low Deviation CHW Set Point 1.2.2.3 Determine CHWST 1.2.2.1 Statistics Evaluate CHWST Variation at CHWST Maintained Single Points OK/not CHWdUp CHWST Alarm CHWdDown 1.2.2.2 Evaluate CHWST Variation Alarm Conditions CHWST Alarm Evaluation Interval CHWST Alarm Trigger Low CHWST Alarm Trigger High Battelle Northwest, 2003 Page 48 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.2.2.1 Evaluate CHWST Variation at Single Points Calculate the upper bound for acceptable Chilled Water Temperature using CHWST Upper Bound = CHW Setpoint + (CHWdUp) Calculate the acceptable lower bound for the Chilled Water Temperature using CHWST Lower Bound = CHW Setpoint - (CHWdDown). Compare the Chilled Water Supply Temperature (CHWST) for steady state to the CHWST Upper Bound and CHWST Lower Bound. If CHWST Steady State CHW > CHWST Upper Bound, then set CHWST Maintained OK/not = "Too high" for the current time. If CHWST Steady State CHW <= CHWST Upper Bound and CHWST Steady State CHW>= CHW Lower Bound, then set CHWST Maintained OK/not = "OK" for the current time. If CHWST Steady State CHW < CHWST Lower Bound, then set CHWST Maintained OK/not = "Too low" for the current time. Calculate the CHW Temperature Deviation for a single point (current time) CHWST Deviation = CHWST Steady State CHW - CHW Setpoint. Ref file: 2.1CHW temperature control.doc Battelle Northwest, 2003 Page 49 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.2.2.2 Evaluate CHWST Variation Alarm Conditions CHWST Maintained OK/not 1.2.2.2.1 Update CHWST Alarm Variables CHWSTNumber CHWST Alarm High Trigger High CHWST Alarm Trigger Low CHWSTNumber Low 1.2.2.2.2 Evaluate Alarm Conditions CHWST Alarm Evaluation Interval CHWST Alarm Battelle Northwest, 2003 Page 50 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.2.2.2.1 Update CHWST Alarm Variables Update the variable CHWST Maintained OK/not Array Update all values in the array, adding the current value of CHWST Maintained OK/not to the array and by dropping the oldest value of CHWST Maintained OK/not from the array. Update values for CHWSTNumber High and CHWSTNumber Low. Set CHWSTNumber High = number of values "Too High" appearing in CHWST Maintained OK/not Array. Set CHWSTNumber Low = number of values "Too Low" appearing in CHWST Maintained OK/not Array. [Determine whether this evaluation should be done during initial start-up processing (this shouldn't really be part of the DFDs because it represents intialization and control), If Total Number of Time Steps Processed < CHWST Alarm Evaluation Interval, then terminate processing of 2.8.2 (i.e., do not evaluate CHWST Variation Alarm Conditions). Otherwise, continue with 2.8.2 processing.] Ref file: 2.1CHW temperature control.doc Battelle Northwest, 2003 Page 51 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.2.2.2.2 Evaluate Alarm Conditions Calculate values for CHWSTFraction High and CHWSTFraction Low. CHWSTFraction High = CHWSTNumber High/(CHWST Alarm Evaluation Interval) CHWSTFraction Low = CHWSTNumber Low/(CHWST Alarm Evaluation Interval) Compare CHWSTFraction High with CHWST Alarm Trigger High. Compare CHWSTFraction Low with CHWST Alarm Trigger Low. If CHWSTFraction High >= CHWST Alarm Trigger High, then set CHWST Alarm = "Too High." If CHWSTFraction High < CHWST Alarm Trigger High and CHWSTFraction Low < CHWST Alarm Trigger Low, then set CHWST Alarm = "OK". If CHWSTFraction Low >= CHWST Alarm Trigger Low, then set CHWST Alarm = "Too Low." Notes: Conclusions regarding a fault existing or not based on individual points are likely to be unrealiable. Conclusions are likely to best be made by considering a high percentage of points over some period of time exceeding some minimum time, e.g., a day or a week (24 hours or 168 hours). Therefore, we base the assignment of CHWST Alarm on a minimum set of points rather than individual points. Ref file: 2.1CHW temperature control.doc Battelle Northwest, 2003 Page 52 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.2.2.3 Determine CHWST Statistics* If CHWSTAlarm = Too High, then Calculate mean CHWST for the times correspoding to the too-high points in the CHWST Maintained OK/not Array. CHWST Mean Too-High Deviation = Sum [CHWST Deviation(time index)]/ (CHWSTNumber High), where time index takes values between the currrent time and (CHWST Alarm Evaluation Interval - 1) time steps ago and the sum only includes values of CHWST Deviation for which CHWST Maintained OK/not = "Too High". Set Mean Too Low CHWST Deviation = null. If CHWSTAlarm = Too Low, then Calculate mean CHWST for the times correspoding to the too-low points in the CHWST Maintained OK/not Array. CHWST Mean Too-Low Deviation = Sum [CHWST Deviation(time index)]/ (CHWSTNumber Low), where time index takes values between the currrent time and (CHWST Alarm Evaluation Interval - 1) time steps ago and the sum only includes values of CHWST Deviation for which CHWST Maintained OK/not = "Too Low". Set Mean Too High CHWST Deviation = null. Note: This process is proposed for Round 2. Also, additional or other statistics could be calculated in this process. These should also be proposed for Round 2. Battelle Northwest, 2003 Page 53 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.3 Diagnose Chiller Cycling Minimum Compressor Off Time Minimum Compressor On Time 1.3.1 Evaluate compressor current (or Compressor power) vs time On Cycle OK/not Compressor Compressor Status Off Cycle OK/not Battelle Northwest, 2003 Page 54 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.3.1 Evaluate Compressor current (or power) vs time If Compressor Status = "On" and Last Compressor Status = "On", then terminate this evaluation. Nothing new to check. If Compressor Status = "On" and Last Compressor Status = "Off," then set Last Compressor Switch On Time = Current Time and check Last Compressor Off Interval. Calculate the Last Compressor Off Interval using Last Compressor Off Interval = Last Compressor Switch On Time - Last Compressor Switch Off Time If Last Compressor Off Interval >= Minimum Compressor Off Time, then set Compressor Off Cycle OK/not = "OK." If Last Compressor Off Interval < Minimum Compressor Off Time, then set Compressor Off Cycle OK/not = "not OK." The compressor is not staying off long enough during cycling. Possible causes include an incorrectly specified minimum off time in the control algorithm or for compressors with minimum on/off times controlled by a relay a failed relay or one requiring adjustment. If Compressor Status = "Off" and Last Compressor Status = "Off," then terminate this evaluation. Nothing new to check. If Compressor Status = "Off" and Last Compressor Status = "On", then set Last Compressor Switch Off Time = Current Time and check Last Compressor On Interval. Calculate the Last Compressor On Interval using Last Compressor On Interval = Last Compressor Switch Off Time - Last Compressor Switch On Time If Last Compressor On Interval >= Minimum Compressor On Time, then Compressor On Cycle OK/not = "OK." If Last Compressor On Interval < Minimum Compressor On Time, then Compressor On Cycle OK/not = "not OK." The compressor is not staying on long enough during cycling. Possible causes include an incorrectly specified minimum on time in the control algorithm or for compressors with minimum on/off times controlled by a relay a failed relay or one requiring adjustment. Update Last Compressor Status :Set Last Compressor Status = Compressor Status* *This over-writes previous compressor status with current status and should not be performed if previous status is required in subsequent processing. Ref: 4.x chiller cycling.doc Battelle Northwest, 2003 Page 55 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.0 Diagnose Interlocks Supply Fan Status Supply Fans/CHW Pumps Interlock OK/not Secondary CHW Pumps Status CHW Pumps 1.5.2 Status Diagnose CHW Condenser Fans Interlocks Status Condenser Pumps Status Compressor Secondary/Primary Status Compressor CHW Pumps interlocked with Interlock OK/not 1.5.1 Condenser Pumps Diagnose OK/not Condenser Pumps Chiller Supply Fans/Secondary Max Start-Up Time Interlocks CHW Pumps Interlock OK/not Compressor Interlock Chiller Condenser With Condenser Type Fans OK/not CHW Pumps Compressor Max Start-Up interlocked with Time CHW Pumps Water-side OK/not Economizing Battelle Northwest, 2003 Page 56 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.1.1 Verify Proper Condenser Pumps/Compressor Interlock Compressor Interlock Chiller Condenser With Condenser Type Pumps OK/not 1.5.1.1.1 Evaluate Condenser Pumps Power Condenser Pumps vs Compressor Compressor Max Start-Up Time Power Status Last Compressor Status Condenser Pumps Last Time Turned On Last Condenser Pumps Status Condenser Pumps 1.5.1.1.2 Status Update Last Compressor and Pumps Status Battelle Northwest, 2003 Page 57 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.1.1.1 Evaluate Condenser Pumps Power vs Compressor Power If Chiller Condenser Type = Air-Cooled, then terminate this analysis. If Chiller Condenser Type = Water-cooled, then compare the compressor status and condenser-pumps status for the current time. If the Compressor Status = "On" and the Condenser-Pumps Status = "On," then Compressor Interlock With Condenser Pumps OK/not = "OK" If the Compressor Status = "Off" and the Condenser-Pumps Status = "Off," then Compressor Interlock With Condenser Pumps OK/not = "OK," unless the Compressor Status = "Off" and Last Compressor Status = "Off," and current Condenser Pumps Status = "Off" and Last Condenser Pumps Status = "On", then the condenser pumps are cycling (turning on and off) unnecessarily and Compressor Interlock With Condenser Pumps OK/not = "Not OK. Repeated frequent cycling will shorten the life of the condenser pumps." If the Compressor Status = "On" and the Condenser-Pumps Status = "Off," then Compressor Interlock With Condenser Pumps OK/not = "not OK." The chiller cannot reject heat and this could result in damage to the compressor. If the Compressor Status = "Off" and the Condenser-Pumps Status = "On," then further evaluation is required . If Current Time - Condenser Pumps Last Time Turned On <= Condenser Pumps Max Start- Up Time,then Compressor Interlock With Condenser Pumps OK/not = "OK" (for now; actually this corresponds to no fault detected). If Current Time - Condenser Pumps Last Time Turned On > CondenserPumps Max Start-Up Time, then Compressor Interlock With Condenser Pumps OK/not = "Not OK." The condenser pumps are turning on too much in advance of the chiller and wasting energy. Battelle Northwest, 2003 Page 58 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.1.1.2 Update Last Compressor and Pumps Status If Condenser Pumps Status = "On" and Last Condenser Pumps Status = "Off", then set Condenser Pumps Last Time Turned On = Current Time. Otherwise, do not change Condenser Pumps Last Time Turned On, i.e., set Condenser Pumps Last Time Turned On = Condenser Pumps Last Time Turned On. Then, Set Last Compressor Status = Compressor Status.* Set Last Condenser-Pumps Status = Condenser-Pumps Status.* *These actions over-write the previous statuses and should not be performed if the previous statuses are required in subsequent processing. Battelle Northwest, 2003 Page 59 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.1.2.1 Evaluate Condenser Fans Power vs Compressor Power If Chiller Condenser Type = Water-Cooled, terminate this analysis. If Chiller Condenser Type = Air-cooled, then Compare the compressor status and condenser-fan status for the current time. If the Compressor Status = "On" and the Condenser-Fans Status = "On," then Compressor Interlock With Condenser Fans OK/not = "OK" If the Compressor Status = "Off" and the Condenser-Fans Status = "Off," then Compressor Interlock With Condenser Fans OK/not = "OK." If the Compressor Status = "On" and the Condenser-Fans Status = "Off," then Compressor Interlock With Condenser Fans OK/not = "Not OK." The chiller cannot reject heat and this could result in damage to the compressor. If the Compressor Status = "Off" and the Condenser-Fans Status = "On," then Compressor Interlock With Condenser Fans OK/not = "Not OK." The fans are running unnecessarily and wasting energy. Battelle Northwest, 2003 Page 60 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.1.3 Verify Proper CHW Pumps/ Compressor Interlock Compressor interlocked with CHW Pumps CHW Pumps OK/not Max Start-Up Time Water-side Economizing 1.5.1.3.1 Evaluate CHW Pumps Current (or Power) vs. Compressor Compressor Status Current (or Power) Last Compressor Status CHW Pumps Last Time Turned On Last CHW CHW Pumps Pumps Status Status 1.5.1.3.2 Update Last Note: Compressor Applies to both air- and CHW cooled and water- Pumps Status cooled chillers. Battelle Northwest, 2003 Page 61 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.1.3.1 Evaluate Chilled Water Pumps Power vs. Compressor Power Compare the chiller status and chilled water pumps status for the current time. If the Compressor Status = "On" and the CHW Pumps Status = "On," then Compressor Interlock With CHW Pumps OK/not = "OK" If the Compressor Status = "Off" and the CHW Pumps Status = "Off," then Compressor Interlock With CHW Pumps OK/not = "OK," unless the Compressor Status= "Off" and Last Compressor Status = "Off," and current CHW Pumps Status = "Off" and Last CHW Pumps Status = "On", then the condenser pumps are cycling (turning on and off) unnecessarily and Compressor Interlock With CHW Pumps OK/not = "Not OK." Repeated frequent cycling will shorten the life of the CHW Pumps. If the Compressor Status = "On" and the CHW-Pumps Status = "Off," then Compressor Interlock With CHW Pumps OK/not = "not OK." The chiller is operating without a load. Energy is being wasted and damage to the chiller may result. If the Compressor Status = "Off" and the CHW-Pumps Status = "On," then further evaluation is required. If Water-Side Economzing = "Yes", thenCompressor Interlock With Condenser Pumps OK/not = "OK" (as far as we can tell). If Water-Side Economzing = "No", and If Current Time - CHW Pumps Last Time Turned On <= CHW Pumps Max Start-Up Time, then Compressor Interlock With CHW Pumps OK/not = "OK" (for now; actually this corresponds to no fault detected). If Current Time - CHW Pumps Last Time Turned On > CHW Pumps Max Start-Up Time, then Compressor Interlock With CHW Pumps OK/not = "Not OK." The CHW pumps are turning on too much in advance of the chiller and wasting energy. Note: Applies to both water-cooled and air-cooled chillers. Ref. File: 5.3.2 CHW Pumps interlock.doc Battelle Northwest, 2003 Page 62 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.1.3.2 Update Last Compressor and CHW Pumps Status If CHW Pumps Status = "On" and Last CHW Pumps Status = "Off", then set CHW Pumps Last Time Turned On = Current Time. Otherwise, do not change CHW Pumps Last Time Turned On, i.e., set CHW Pumps Last Time Turned On = CHW Pumps Last Time Turned On. Then, set Last Compressor Status = Compressor Status.* and set Last CHW Pumps Status = CHW Pumps Status. *This overwrites the previous status and should not be performed if subsequent processing requires the previous status. Battelle Northwest, 2003 Page 63 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.2 Diagnose CHW Interlocks Supply Fans/CHW Pumps Interlock OK/not CHW Pumps 1.5.2.1 Status Verify Supply Fans/CHW Pumps Interlock 1.5.2.3 Verify Supply Fans Secondary/ Status Primary CHW Secondary/Primary Pumps CHW Pumps Interlock Interlock OK/not 1.5.2.2 Verify Supply Secondary CHW Fans/ Pumps Status Secondary Pumps Interlock Supply Fans/Secondary CHW Pumps Interlock OK/not Battelle Northwest, 2003 Page 64 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.2.1 Verify Supply Fans/CHW Pumps Interlock Supply Fans Status CHW Pumps Status 1.5.2.1.1 Evaluate Supply Fans Current (or Power) vs CHW Pumps Supply Fans/CHW Current (or Pumps Interlock OK/not Power) Battelle Northwest, 2003 Page 65 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.2.1.1 Evaluate Supply Fans Current (or Power) vs Primary CHW Pumps Current (or Power) For each set of primary CHW Pumps, Compare the CHW Pumps Collective Status and Supply Fan Status for the supply fans for each air handler served by this set of specific CHW Pumps. If the CHW Pumps Collective Status = "On" and the Supply Fan Status = "On" for at least one of the air handlers served by this CHW Pumps, then set the Supply Fans/CHW Pumps Interlock OK/not for this set of CHW Pumps = "OK." If the CHW Pumps Collective Status = "Off" and the Supply Fan Status = "Off" for all of the air handlers served by this set of CHW Pumps, then set the Supply Fans/CHW Pumps Interlock OK/not for this CHW Pumps="OK." If the CHW Pumps Collective Status = "Off" and the Supply Fan Status = "On" for at least one of the air handlers served by this set of CHW Pumps, then set the Supply Fans/CHW Pumps Interlock OK/not for this set of CHW Pumps = "Possible problem with supply fan control--check to see if loads in the spaces served are being met for supply fans with Supply Fans Status = "On" that are part of air handlers served by these CHW Pumps. Occupant complaints about temperature or stuffiness may be in indicator of the load not being met. If the CHW Pumps Collective Status = "On" and the Supply Fan Status = "Off" for all of the air handlers served by this set of CHW Pumps, then set the Supply Fans/CHW Pumps Interlock OK/not for this CHW Pumps = "Not OK." These CHW Pumps is operating unnecessarily and is wasting energy. The CHW Pumps should not operate unless at least one of the supply fans in an air handler served by these CHW Pumps is on. Notes: This diagnostic can be applied to current (or power) measured for each supply fan individually or to the collective current for all supply fans served by a CHW pump together. Equipment status is determined in Process 7.0. Ref. File: 5.8 supply fan-CHW pump interlock.doc Battelle Northwest, 2003 Page 66 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.2.2 Verify Supply Fans/ Secondary Pumps Interlock Supply Fans Status 1.5.2.2.1 Secondary CHW Evaluate Supply pumps Status Fans Current (or Power) vs Secondary CHW Supply Fans/Secondary pumps CHW pumps Interlock OK/not Current (or Power) Battelle Northwest, 2003 Page 67 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.2.2.1 Evaluate Supply Fans Current (or Power) vs Secondary CHW pumps Current (or Power) For chilled-water distirbution systems with secondary CHW pumps. For each secondary set of CHW pumps, compare the Secondary CHW pumps Collective Status and Supply Fans Status for the supply fans for each air handler served by this specific secondary CHW pump. If the Secondary CHW pumps Collective Status = "On" and the Supply Fans Status = "On" for at least one of the air handlers served by this set of secondary CHW pumps, then set the Supply Fans/Secondary CHW Pumps Interlock OK/not for this set of secondary CHW pumps = "OK." If the Secondary CHW pumps Collective Status = "Off" and the Supply Fans Status = "Off" for all of the airhandlers served by this set of secondary CHW pumps, then set the Supply Fans/Secondary CHW PumpsInterlock OK/not for this set of secondary CHW pumps = "OK." If the Secondary CHW pumps Collective Status = "Off" and the Supply Fans Status = "On" for at least one of the air handlers served by this set of Secondary CHW pumps, then set the Supply Fans/Seondary CHW Pumps Interlock OK/not for this set of secondary CHW pumps = "Possible problem with supply fan control--check to see if loads in the spaces served are being met" for supply fans with Supply Fans Status = "On" that are part of air handlers served by this set of secondary CHW Pumps. If the Secondary CHW pumps Collective Status = "On" and the Supply Fans Status = "Off" for all of the airhandlers served by this set of Secondary CHW pumps, then set the Supply Fans/Secondary CHW Pumpsinterlock OK/not for this set of secondary CHW pump = "Not OK." This set of secondary CHW pumps is operating unnecessarily and is wasting energy. The set of secondary CHW pumps should not operate unless at least one of the supply fans in an air handler served by this set of secondary CHW pumps is on. Notes: This diagnostic can be applied to current (or power) measured for each supply fan individually or to the collective current for all supply fans served by a set of secondary CHW pump togethers. Equipment status is determined in Process 7.0. Ref. File: 5.10 supply fan-2ndary CHW pump interlock.doc Battelle Northwest, 2003 Page 68 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.2.3 Verify Secondary/Primary CHW Pumps Interlock Secondary CHW pumps Status 1.5.2.3.1 Evaluate Secondary CHW CHW pumps pumps Status Current (or Power) vs Primary CHW pumps Secondary/Primary Current (or Power) CHW Pumps Interlock OK/not Battelle Northwest, 2003 Page 69 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.5.2.3.1 Evaluate Secondary CHW pumps Current (or Power) vs Primary CHW Pumps Current (or Power) For each set of primary CHW pumps, For each set of secondary CHW pumps served by the selected set of primary CHW Pumps, Compare the primary CHW Pumps Collective Status and Secondary CHW pumps Collective Status for each set of secondary CHW pump served by this specific set of primary CHW Pumps. If the primary CHW pumps Collective Status = "On" and the Secondary CHW pump Status = "On" for at least one of the secondary CHW pumps served by this set of primary CHW pumps, then set Secondary/Primary CHW Pumps Interlock OK/not for this set of primary CHW pump = "OK." If the primary CHW pumps Collective Status = "Off" and the Secondary CHW pump Status = "Off" for all of the secondary CHW pumps served by this set of primary CHW pumps, then set Secondary/Primary CHW Pumps Interlock OK/not for this set of primary CHW pumps = "OK." If the primary CHW pumps Collective Status = "Off" and the Secondary CHW pump Status = "On" for at least one of the secondary CHW pumps served by this set of primary CHW pumps, then set Secondary/Primary CHW Pumps Interlock OK/not for this set of primary CHW pumps = "Not OK." The secondary CHW pumps that are one are wasting energy. Secondary CHW pumps should only operate when the set of primary CHW pumps is operating. If the primary CHW Pumps Collective Status = "On" and the Secondary CHW pump Status = "Off" for all of the secondary CHW pumps served by this set of primary CHW pumps, then set Secondary/Primary CHW Pumps Interlock OK/not for this set of primary CHW pumps = "Not OK." This set of primary CHW pumps is operating unnecessarily and is wasting energy. The set of primary CHW pump should not operate unless at least one of the secondary CHW pumps served by this set of primary CHW pumps is on. Notes: This diagnostic can be applied to current (or power) measured for each secondary CHW pump individually or to the collective current for all secondary CHW pumps served by a CHW pump together. Equipment status is determined in Process 7.0. Ref. File: 5.9 secondary CHWP interlock.doc Battelle Northwest, 2003 Page 70 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 1.6.0 Diagnose Chiller Performance Placeholder only for Round 2. Chiller Performance is a candidate for development of diagnostics for Round 2. Enforma help suggests 4 plots that may be useful for Chiller Performance Diagnostics: (cid:252) Compressor Power vs. Ambient Temperature (cid:252) Compressor Power vs. Condenser Inlet Temperature (cooling tower outlet temperature) (cid:252) Compressor Power vs. Chiller Delta T (cid:252) Compressor Power vs. Chiller Inelt Temperature Battelle Northwest, 2003 Page 71 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.0 Diagnose Cooling Tower Rejected CT Range for Rejected Ambient wb CT Fans Status Off and/or Temp Points for Fans Status Off Sump Temp Below the and/or for Sump Temp Below CT Fans "On" Setpoint the CT Fans "On" Setpoint CT Inlet Rejected CT Temperature CT Range Fans Current When Benchmark Condenser Pumps are "Off" Rejected CT 2.3 Range When Diagnose Condenser Pumps are "Off" 2.1 Cooling Rejected Sump Temp When Diagnose Tower Condenser Pumps are "Off" Cooling Capacity Rejected Ambient wb Tower Condenser Interlocks Condenser Pumps Status Temp When Condenser Pumps Status Pumps are "Off" CT Fans/ Condenser CT w A b m T b e ie m n p t CT Range C S T ta F g a in n g s Pumps Interlock Sump OK/Not OK/Not OK/Not Temp CT Fans "On" CT Setpoint CT Fans "Off" Fans Status Setpoint 2.2 Rejected CT Approach and Ambient Diagnose wb Temp Points for CT Fans Min. CT Fans On Time Cooling Status Off and/or for CT Sump Temp Min. CT Fans Off Time Tower Below the CT Fans "On" Setpoint Control/ Cycling Rejected CT Approach and Current Time Ambient wb Temp Rejected CT When Condenser Pumps are "Off" CT Cycling Sump Temp When CT Approach OK/Not Condenser Pumps are "Off" OK/Not Sump Temp Control Rejected Ambient wb OK/Not Temp When Condenser Pumps are "Off" Battelle Northwest, 2003 Page 72 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.1 Diagnose Cooling Tower Interlocks Condenser Pumps Status CT Fans Status 2.1.1 Evaluate CT Fans Status vs. Condenser pumps Status CT Fans/Condenser Pumps Interlock OK/Not Battelle Northwest, 2003 Page 73 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.1.1 Evaluate CT Fans Status vs. Condenser Pumps Status Compare the CT Fans Status and Condenser Pumps Status for the current time. If the CT Fans Status = "On" and the Condenser Pumps Status = "On," then CT Fans/Condenser Pumps Interlock OK/Not = "OK" If the CT Fans Status = "Off" and the Condenser Pumps Status = "Off," then CT Fans/Condenser Pumps Interlock OK/Not = "OK." If the CT Fans Status = "On" and the Condenser Pumps Status = "Off," then CT Fans/Condenser Pumps Interlock OK/Not = "Not OK." The CT Fans must be off when the condenser pumps are off, otherwise energy is being wasted. If the CT Fans Status = "Off" and the Condenser Pumps Status = "On," then CT Fans/Condenser Pumps Interlock OK/Not = "OK." The cooling tower Fans may be off when the condenser pumps are running, but this should not always be the case. Note: This process uses as inputs the CT Fans Status and the Condenser Pumps Status that are determined in Process 7.0. Values of CT Fans/Condenser Pumps Interlock OK/Not = "OK" should be interpretted more precisely as "no problem has been detected with this interlock." It is possible that no problem is detected under current conditions,yet an interlock problem exists. This is particularly true when CT Fans Status = "Off" and Condenser Pumps Status = "On," which while OK under some condtions is not always OK. Additional diagnostics would be useful here. Ref. File: 1.22 Evaluate Plot of CT Fan vs. CCP Battelle Northwest, 2003 Page 74 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2 Diagnose Cooling Tower Temperature Control/Cycling Sump Temp Control OK/Not Rejected CT CT Fans "Off" Sump Temp When Setpoint Condenser Pumps are "Off" 2.2.1 Rejected Ambient wb Diagnose Temp When Condenser Pumps Sump Condenser Pumps are "Off" Status Temperature Control Ambient wb CT Temp CT Fans "On" Sump Temp Setpoint CT Fans 2.2.3 Status Diagnose CT Based On Approach 2.2.2 Rejected CT Approach Diagnose and Ambient wb Temp Cooling When Condenser Pumps Tower CT Approach are "Off" OK/Not Current Cycling CT Cycling Time OK/Not Rejected CT Approach and Ambient wb Temp Points Min. CT Fans On Time for CT Fans Status Off and/or for CT Sump Temp Below Min. CT Fans Off Time the CT Fans "On" Setpoint Battelle Northwest, 2003 Page 75 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.1 Diagnose Sump Temperature Control CT Fans "Off" Setpoint CT Fans "On" Setpoint CT Sump Temp Ambient wb 2.2.1.2 Passed (Filtered) CT Temp Evaluate Sump Temp Filtered CT 2.2.1.1 Sump Temp vs. Filter CT Sump Filtered Ambient Temp and wb Temp Ambient wb Temp for Times Passed (Filtered) Sump Temp When Condenser Ambient wb Control Pumps are "On" Temp OK/Not Condenser Pumps Status Rejected CT Sump Temp When Condenser Pumps are "Off" Rejected Ambient wb Temp When Condenser Pumps are "Off" Battelle Northwest, 2003 Page 76 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.1.1 Filter CT Sump Temp and Ambient wb Temp for Times When Condenser Pumps are On For each triplet of (Condenser Pumps Status, CT Sump Temperature, and Ambient wb Temperature) reject (i.e., filter out) those triplets for which Condenser Pumps Status = off. pass those triplets for which Condenser Pumps status = on. Battelle Northwest, 2003 Page 77 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.1.2 Evaluate Filtered CT Sump Temp vs. Filtered Ambient wb Temp Determine if CT fans are on when Sump Temp is above its on setpoint If Sump Temperature > CT Fans On Setpoint and CT Fans Status = "On," then set Sump Temp Control OK/Not= "OK" If Sump Temperature > CT Fans On Setpoint and CT Fans Status = "Off," then set Sump Temp Control OK/Not= "Not OK. The CT fans are off but should be on." Possible causes include: control problem sump temperature sensor problem electrical problem (motor failure) other problems with the fan motor Determine if CT fans are off when sump Temp is below the off setpoint If Sump Temperature <= CT Fans Off Setpoint and CT Fans Status = "On," then set Sump Temp Control OK/Not= "Not OK. The CT fans are on but should be off." Possible causes include: control problem actuator or relay problem If Sump Temperature <= CT Fans Off Setpoint and CT Fans Status = "Off," then set Sump Temp Control OK/Not= "OK." Ref. File: 2.1.1 Sump Temperature Control Diagnostics Battelle Northwest, 2003 Page 78 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.2 Diagnose Cooling Tower Cycling Min. CT Fans CT Fans On Time Status Min. CT Fans Current Off Time Time 2.2.2.1 Evaluate CT Fans Cycling Times CT Cycling OK/Not Battelle Northwest, 2003 Page 79 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.2.1 Evaluate CT Fans Cycling Times Determine if new cycling information is available to analyze (fans currently on). If CT Fans Status = "On" and Last CT Fans Status = "On," then terminate this evaluation. There is nothing new to check. If CT Fans Status = "On" and Last CT Fans Status = "Off," then set Last CT Fans On Time = Current Time and check Last CT Fans Off Interval. If Last CT Fans Off Interval >= Minimum CT Fans Off Time, then CT Cycling OK/Not = "OK." If Last CT Fans Off Interval < Minimum CT Fans Off Time, then CT Cycling OK/Not = "Not OK." The CT fans are not staying off long enough during cycling. Possible causes include:: The timer that is supposed to eliminate short cycling is not working properly. The "on" and "off" control setpoints for the fans are too close to one another. Possible corrective actions include: Check the control algorithm for the fans if it is controlled by software. Increase the minimum off time in the software, as necessary, to meet the manufacturers specification for minimum off time. Check the performance of the time-delay relay. Energize the relay and manually time the delay until action. Compare the measured time with the specification. Replace or adjust the relay if it is out of spec. Determine if new cycling information is available to analyze (fans currently off). If CT Fans Status = "Off" and Last CT Fans Status = "Off," then terminate this evaluation. There is nothing new to check. If CT Fans Status = "Off" and the Last CT Fans Status = "On," then set Last CT Fans Off Time = Current Time and check Last Fan On Interval. If Last CT Fans On Interval >= Minimum CT Fans On Time, then CT Cycling OK/Not = "OK." If Last CT Fans On Interval < Minimum CT Fans On Time, then CT Cycling OK/Not = "Not OK." The CT fans are not staying on long enough during cycling. Possible causes include: The timer that is supposed to eliminate short cycling is not working properly. The "on" and "off" control setpoints for the fans are too close to one another. The cooling tower capacity is too great for the load, so the fans rapidly cycle off (i.e., the on time is very short) because the load is met quickly. Possible corrective actions include: Check the control algorithm for the fans if it is controlled by software. Increase the minimum off time in the software, as necessary, to meet the manufacturers specification for minimum off time. Check the performance of the time-delay relay. Energize the relay and manually time the delay until action. Compare the measured time with the specification. Replace or adjust the relay if it is out of spec. Battelle Northwest, 2003 Page 80 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.3 Diagnose CT Based on Approach Ambient wb Temp 2.2.3.2 Calculate CT Approach CT Approach CT Approach CT OK/Not Sump Temp Rejected CT Approach and Ambient wb Temp Points 2.2.3.1 for CT Fans Status Off and/or for Evaluate CT Sump Temp Below CT Fans "On" Filtered CT the CT Fans "On" Setpoint Setpoint Approach vs. Filtered Ambient wb Temp Rejected CT Approach and CT Fans Ambient wb Temp Status When Condenser Pumps are "Off" Condenser Pumps Status Battelle Northwest, 2003 Page 81 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.3.1 Evaluate Filtered CT Approach vs. Filtered Ambient wb Temp 2.2.3.1.3 CT Approach Determine Benchmark Benchmark CT Approach (or specification) CT Approach Ambient wb Temp CT Approach 2.2.3.1.1 Benchmark Filter CT CT Fans "On" Approach and Setpoint CT Ambient wb Sump Temp Condenser Temp for Passed (Filtered) Pumps Status Condensor CT Approach CT Pumps "On" Fans Status 2.2.3.1.2 Evaluate CT Passed (Filtered) Approach Ambient wb Temp Rejected CT Approach and CT Approach Ambient wb Temp OK/Not When Condenser Pumps are "Off" Rejected CT Approach and Ambient wb Temp Points for CT Fans Status Off and/or for CT Sump Temp Below the CT Fans "On" Setpoint Battelle Northwest, 2003 Page 82 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.3.1.1 Filter CT Approach and Ambient wb Temp for Condensor Pumps "On" For each triplet of (Condenser Pumps Status, CT Approach, and Ambient wb Temperature) reject (i.e., filter out) those triplets for which Condenser Pumps Status = off. pass those triplets for which Condenser Pumps Status = on. Battelle Northwest, 2003 Page 83 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.3.1.2 Evaluate CT Approach Behavior CT Fans Status CT Sump 2.2.3.1.2.1 Temp Filter for Fans Plot of Passed CT Approach and Ambient wb Temp Points On and Sump for CT Fans Status On and for Temp CT Fans "On" Sump Temp Above its Setpoint CT Approach Setpoint Setpoint Benchmark Plot of Passed CT Approach vs. Passed Ambient wb Temp Rejected CT Approach and 2.2.3.1.2.2 Ambient wb Temp Points Check for CT Fans Status Off and /or for Approach Sump Temp Below the CT Fans "On" Setpoint CT Approach OK/Not Battelle Northwest, 2003 Page 84 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.3.1.2.1 Filter for Fans "On" and Sump Temp Setpoint For each point on the Plot of filtered CT Approach vs. Filtered Ambient wb Temp, reject it if the CT Fans Status is "off" or if the Sump Temperature < CT Fans "on" setpoint otherwise, accept it (pass it). Ref: 2.4 approach diagnostics discussion.doc Battelle Northwest, 2003 Page 85 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.3.1.2.2 Check Approach Compare values of CT Approach to the CT Approach Benchmark. If CT Approach is <= CT Approach Benchmark, then set CT Approach OK/Not = "OK" If CT Approach is > CT Approach Benchmark, then there is a problem (not OK) with CT heat rejection. Set CT Approach OK/Not = "Not OK. There is a problem with heat rejection from the cooling tower." Possible causes of heat rejection degradation (i.e., CT Approach OK/Not = Not OK): Cooling tower media fouled due to mineral deposits or ambient dirt/dust/etc. Need to inpsect. Restricted airflow for other reasons (e.g., piece of cardboard stuck over part of cooling tower air inlet) Condenser pump fouling, pipe fouling, or other restrictions on the water side. Ref. File: 2.4 Approach diagnostics discussion.doc Battelle Northwest, 2003 Page 86 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.3.1.3 Determine Benchmark CT Approach CT Approach Benchmark is a user input (in the current process; see note below). Battelle Northwest, 2003 Page 87 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.2.3.2 Calculate CT Approach For each pair of values of Sump Temperature and Ambient wb Temperature corresponding to the same time, calculate the CT Approach using CT Approach = Sump Temp - Ambient Wet Bulb Temp Note: Approach is not "controlled" - it is the difference between the sump temperature, which IS controlled, and the ambient wb temperature, which is NOT controlled. Ref: 2.4 approach diagnostics.doc Battelle Northwest, 2003 Page 88 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.3 Diagnose Cooling Tower Capacity CT Range OK/Not CT Range Benchmark Rejected Ambient wb Ambient wb Temp Points for CT Fans Status Temp Off and/or for Sump Temp Below CT Fans the CT Fans "On" Setpoint Status CT Inlet Temperature Rejected CT Range for 2.3.2 for CT Fans Status Off and/or Diagnose CT Sump Temp Below the Range CT Fans "On" Setpoint CT Sump Rejected CT Range Temp When Condenser Pumps are "Off" Rejected Ambient wb Condenser Pumps Temp When Condenser Status Pumps are "Off" CT Fans "On" 2.3.1 Setpoint (maximum Diagnose CT Sump Temp Fans Setpoint) CT Fans "Off" Staging Rejected CT Setpoint (Minimum Fans Current When Sump Temp Setpoint) Condenser Pumps are "Off" Rejected CT CT Fans Sump Temp When Staging Condenser Pumps are "Off" OK/Not Battelle Northwest, 2003 Page 89 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.3.1 Diagnose CT Fans Staging CT Fans Status CT Sump Temp 2.3.1.1 Filter CT Fans Passed (Filtered) CT Current and Sump Temp Sump Temp for Condenser Pumps "On" Passed (Filtered) CT Fans Status Condenser Pumps Status Rejected CT Fans Current When Condenser Pumps are "Off" Rejected CT Sump Temp When Condenser Pumps are "Off" CT Fans "Off" 2.3.1.2 Setpoint (Minimum Evaluate Filtered Sump Temp Setpoint) CT Fans Current (or Power) vs. Filtered Sump CT Fans "On" Temp Plot Setpoint (Maximum Sump Temp Setpoint) CT Fans Staging OK/Not Battelle Northwest, 2003 Page 90 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.3.1.1 Filter CT Fans Current and Sump Temp for CT Pumps "On" For each triplet of (Condenser Pumps Status, CT Fans Status, and CT Sump Temperature) reject (i.e., filter out) those triplets for which Condenser Pumps Status = off. pass those triplets for which Condenser Pumps status = on. Battelle Northwest, 2003 Page 91 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.3.1.2 Evaluate Filtered CT Fans Current (or Power) vs. Filtered Sump Temp Plot Compare Sump Temperature to the CT Fans "On" Setpoint (maximum Sump Temperature Setpoint). If Tsump < CT Fans "On" Setpoint, then set Fans Staging OK/Not = "OK (as far as we can tell)" If Tsump > CT Fans "On" Setpoint, and CT Fans Status = "On" for all CT fans, then set Fans Staging OK/Not = "OK." If Tsump > CT Fans "On" Setpoint and CT Fans Status „ "On" for all CT fans (i.e., all CT fans are not on), set Fans Staging OK/Not = "not OK. There is a fan staging problem and the cooling tower is not maintaining the Sump Temp as low as it could/should." Compare Tsump to the CT Fans "Off" Setpoint (minimum Sump Temperature Setpoint). If Tsump > CT Fans "Off" Setpoint, then set Fans Staging OK/Not = "OK (as far as we can tell)." If Tsump < CT Fans "Off" Setpoint, and if CT Fans Status = "Off" for all CT Fans (i.e., all CT fans are off), then set Fans Staging OK/Not = "OK." If Tsump < CT Fans "Off" Setpoint, and If any CT Fans Status = "On" (i.e., any CT fan is "on"), then set Fans Staging OK/Not = "Not OK. There is a fan staging problem and energy is being wasted. All CT Fans should be off." Note: The minimum and maximum sump temp setpoints are currently specified as inputs. A procedure could be developed to derive them from performance data. This would reduce the number of user inputs required. Note: A process for checking the individual fan stages has not been specified here. it would need to be added. See Behavior 3 in the reference file. Tsump = Sump Temp Tsump maximum setpoint = maximum Sump Temperature setpoint Tsump minimum setpoint = minimum Sump Temperature setpoint Ref. File: 3.3 fan staging diagnostic.doc Battelle Northwest, 2003 Page 92 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.3.2 Diagnose CT Range CT Inlet Temperature CT Sump Temp CT Range CT Fans "On" CT Fans Benchmark Setpoint Status 2.3.2.3 Calculate CT Range CT Passed Ambient wb Temp Range Points for Condenser Pumps On, CT Fans Status On, and Sump Temp Above the CT Fans "On" Setpoint 2.3.2.2 2.3.2.1 Evaluate CT Ambient Filter CT Range Passed CT Range for Range Behavior wb Temp and Ambient Condenser Pumps On, wb Temp CT Fans Status On, and Sump Temp Above the Condenser Pumps CT Fans "On" Setpoint Status CT Range OK/Not Rejected Ambient Passed (Filtered) CT wb Temp When Range Condenser Pumps are "Off" Passed (Filtered) Ambient Rejected CT Range wb Temp When Condenser Rejected Ambient wb Temp Pumps are "Off" Points for CT Fans Status off and/or for Sump Temp Below the CT Fans "On" Setpoint Rejected CT Range for CT Fans Status Off and/or Sump Temp Below the CT Fans "On" Setpoint Battelle Northwest, 2003 Page 93 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.3.2.1 Filter CT Range and Ambient wb Temp Passed Ambient wb Temp CT Fans Points for Condenser Pumps On, CT Fans Status CT Fans "On" Status On, and Sump Temp Above the Setpoint CT Fans "On" Setpoint CT Sump Temp Passed CT Range for 2.3.2.1.2 Condenser Pumps On, Filter for Fans CT Fans Status On, and On and Sump Sump Temp Above the Temp Above CT Fans "On" Setpoint its Setpoint Passed (Filtered) CT Range Rejected Ambient wb Temp Points for CT Fans Status Off and/or for Sump Temp Below the CT CT Passed (Filtered) Fans "On" Setpoint Range Ambient wb Temp Rejected CT Range for CT Fans Status Off and/or Ambient Sump Temp Below the wb Temp 2.3.2.1.1 CT Fans "On" Setpoint Filter CT Range and Ambient wb Temp for Condenser Pumps "On" Rejected CT Range When Condenser Pumps Condenser Pumps are "Off" Status Rejected Ambient wb Temp When Condenser Pumps are "Off" Battelle Northwest, 2003 Page 94 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.3.2.1.1 Filter CT Range and Ambient wb Temp for Condenser Pumps "On" For each triplet of (Condenser Pumps Status, CT Range, and Ambient wb Temperature) reject (i.e., filter out) those triplets for which Condenser Pumps Status = off. pass those triplets for which Condenser Pumps status = on. Battelle Northwest, 2003 Page 95 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.3.2.1.2 Filter for Fans "On" and Sump-Temp Setpoint For each point on the Plot of filtered CT Range vs. Filtered Ambient wb Temp, reject it if the Fans Status is "off" or if the Sump Temperature is below the CT Fans "On" Setpoint (Maximum Sump Temperature Setpoint). otherwise, accept it (pass it). Battelle Northwest, 2003 Page 96 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.3.2.2 Evaluate CT Range Behavior Compare values of CT Range to the Range Benchmark.. If CT Range is >= Range Benchmark, then set CT Range OK/Not= "OK" If CT Range is < Range Benchmeark, then set CT Range OK/Not = "Not OK. There is a problem with CT heat rejection and it is performing at less than expected capacity." Possible heat rejection degradation causes: Tower media fouling due to mineral deposits or ambient dirt/dust/etc. Restricted airflow Condenser pump fouling, again, pipe fouling, restrictions Tower to small for load (design problem) Ref. File: 3.2.3 Range diagnostics discussion.doc Battelle Northwest, 2003 Page 97 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 2.3.2.3 Calculate CT Range For each time increment (and pair of necessary temperature values), calculate the CT Range, using the formula CT Range = CT Sump Temperature - CT Inlet Temperature. Battelle Northwest, 2003 Page 98 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.0 Determine Equipment Status CHW Set CHWST CHW Transient Point Decrease Factor Compressor Compressor 3.1 Status Condenser Pumps Determine Current (or Power) Current (or Power) Compressor Compressor Compressor Motor Status and State 3.2 Rated Current State Condenser-Pumps Determine Motor Rated Condenser (or Power) Current (or Power) Pumps Condenser Pumps Compressor P Status Status Condenser CHW Pumps Pumps P Motor Rated 3.3 Current (or Power) Secondary Determine CHW Pumps CHW CHW Pumps Motor Rated 3.4 Secondary CHW Pumps Status Current (or Power) Determine Pumps Status Secondary Status CHW Pumps CHW Pumps Current (or Power) Status CHW Secondary CHW Pumps P Pumps P Supply CT Fans Secondary CHW Pumps Fans Status Current (or Power) Supply Fan Status CT Fan Motors 3.7 Motors 3.5 Rated current Determine Rated current Determine (or Power) Supply (or Power) CT Fans Condenser Fan Condenser Fans Fans Status Status Motors 3.6 Status Supply Rated current Determine Fans P CT Fans P (or Power) Condenser CT Fans Fans Status Supply Condenser Fans Current (or Power) Fans P Current (or Power) Condenser Fans Current (or Power) Battelle Northwest, 2003 Page 99 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.1 Determine Compressor Status and State Compressor Motor Rated Current (or Power) 3.1.1 CHWST Set Compressor P Compressor Compressor "On" Current (or Power) Threshold" 3.1.2 Compressor "On" Compressor Assess Threshold Status Compressor Status and CHW Transient State Decrease Factor Compressor Compressor Status State CHW Setpoint 3.1.3 CHWST Last Calculate the Minimum Transient Minimum Transient Decrease in Decrease in CHWST CHWST Battelle Northwest, 2003 Page 100 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.1.1 Set Compressor "On" Threshold Calculate the Compressor "On" Threshold using Compressor "On" Threshold = Compressor P x Compressor Motor Rated Current (or Power) Notes: The chiller is "on" when the compressor is "on;" therefore, the chiller status can be determined by evaluating the compressor on/off status. As the result, the Chiller "On" Threshold is set by setting the Compressor "On" threshold. The Compressor "On" Threshold is calculated from input power rating of the compressor motor. Compressor P has values that range from 10 to 50% -- this can be a user input. Ref file: 2.1CHW temperature control.doc Battelle Northwest, 2003 Page 101 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.1.2 Assess Compressor Status and State For each value of Compressor Current (or Power), compare Compressor Current (or Power) to the Compressor "On" Threshold. If the value of Compressor Current (or Power) <= Compressor "On" Threshold, then set Compressor Status = "Off" and set Compressor State = "Off" If the value of Compressor Current (or Power) > Compressor "On" Threshold, then set Compressor Status = "on." If Compressor Status = "On", then evaluate Compressor State as follows: Update the value of Last Compressor State, using Last Compressor State = Compressor State. Determine and assign the new value of Compressor State for the current time Check if the compressor is already in steady state If Last Compressor State = Steady, then set Compressor State = "Steady" If Compressor Status = "On" and the Last Compressor State = "Transient", then Calculate Drop in CHW Supply Temperature using Drop in CHWST = CHWST Last - CHWST Compare Drop in CHW Supply Temperature to the Minimum Transient Decrease in CHWST. If Drop in CHWST > Minimum Transient Decrease in CHWST, then set Compressor State = "Transient". If Drop in CHWST <= Minimum Transient Decrease in CHWST, then set Compressor State = "Steady" Update CHWST Last CHWST Last = CHWST Note: Compressor Status = Chiller Status Battelle Northwest, 2003 Page 102 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.1.3 Calculate the Minimum Transient Decrease in CHWST Calculate the Minimum Transient Decrease in CHWST using the relation: Minimum Transient Decrease in CHWST = CHW Transient Decrease Factor * (CHWST at Last Time Off - CHWST Setpoint) Set new value of CHWST at Last Time Off, If Compressor Status = "Off" and Last Compressor Status = "Off", then set CHWST at Last Time Off = CHWST If Compressor Status = "On" and Last Compressor Status = "Off", then set CHWST at Last Time Off = CHWST Last If Compressor Status = "On" and Last Compressor Status = "On" then set CHWST at Last Time Off = CHWST at Last Off Time (i.e., not change). Update Last Compressor Status Last Compressor Status = Compressor Status* *This over-writes the previous compressor status with the current status and should not be performed if the previous status is required in subsequent processing. Battelle Northwest, 2003 Page 103 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.2 Determine Condenser Pumps Status Condenser-Pumps Motor Rated Current (or Power) 3.2.1 Set Condenser Pumps"On" Condenser Pumps Condenser Pumps Threshold" "On" Threshold Current (or Power) Condenser Pumps P 3.2.2 Assess Condenser Pumps Status Condenser Pumps Status Battelle Northwest, 2003 Page 104 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.2.1 Set Condenser Pumps"On" Threshold" Calculate the Condenser Pumps "On" Threshold using Condenser Pumps "On" Threshold = Condenser Pumps P x Condenser Pump Motors Rated Current (or Power) Notes: Condenser Pumps P has values that range from 10 to 50% -- this can be a user input. Battelle Northwest, 2003 Page 105 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.2.2 Assess Condenser Pumps Status For each value of Condenser Pumps Current (or Power), compare Condenser Pumps Current (or Power) to the Condenser Pumps "On" Threshold. If the value of Condenser Pumps Current (or Power) <= Condenser Pumps "On" Threshold, then set Condenser Pumps Status = "Off." If the value of Condenser Pumps Current (or Power) > Condenser Pumps "On" Threshold, then set Condenser Pumps Status = "On." Battelle Northwest, 2003 Page 106 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.3 Determine CHW Pumps Status CHW Pumps Motor Rated Current (or Power) 3.3.1 CHW Pumps Set CHW Current (or Power) Pumps "On" Threshold" CHW Pumps P 3.3.2 CHW Pumps "On" Threshold Assess CHW Pumps CHW Pumps Status Status Battelle Northwest, 2003 Page 107 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.3.1 Set CHW Pumps "On" Threshold" Calculate the CHW Pumps "On" Threshold using CHW Pumps "On" Threshold = CHW Pumps P x CHW Pumps Motor Rated Current (or Power) Notes: CHW Pumps P has values that range from 10 to 50% -- this can be a user input. Battelle Northwest, 2003 Page 108 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.3.2 Assess CHW Pumps Status For each value of CHW Pumps Current (or Power), compare CHW Pumps Current (or Power) to the CHW Pumps "On" Threshold. If the value of CHW Pumps Current (or Power) <= CHW Pumps "On" Threshold, then set CHW Pumps Status = "off." If the value of CHW Pumps Current (or Power) > CHW Pumps "On" Threshold, then set CHW Pumps Status = "On." Battelle Northwest, 2003 Page 109 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.4 Determine Secondary CHW Pumps Status Secondary CHW Pumps Motor Rated Current (or Power) 3.4.1 Set Secondary CHW Pumps Secondary Current (or Power) CHW Pumps "On" Threshold" Secondary CHW Pumps P Secondary CHW 3.4.2 Pumps Assess "On" Threshold Secondary Secondary CHW CHW Pumps Pumps Status Status Battelle Northwest, 2003 Page 110 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.4.1 Set Secondary CHW Pumps "On" Threshold" Calculate the Secondary CHW Pumps "On" Threshold using Secondary CHW Pumps "On" Threshold = Secondary CHW Pumps P x Secondary CHW Pumps Motors Rated Current (or Power) Notes: Secondary CHW Pumps P has values that range from 10 to 50% -- this can be a user input. Battelle Northwest, 2003 Page 111 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.4.2 Assess Secondary CHW Pumps Status For each value of Secondary CHW Pumps Current (or Power), compare Secondary CHW Pumps Current (or Power) to the Secondary CHW Pumps "On" Threshold. If the value of Secondary CHW Pumps Current (or Power) <= Secondary CHW Pumps "On" Threshold, then set Secondary CHW Pumps Status = "off." If the value of Secondary CHW Pumps Current (or Power) > Secondary CHW Pumps "On" Threshold, then set Secondary CHW Pumps Status = "On." Battelle Northwest, 2003 Page 112 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.5 Determine CT Fans Status CT Fan Motors Rated current (or Power) 3.5.1 CT Fans P Set CT Fans "On" Threshold CT Fans Current (or Power) CT Fans "On" Threshold 3.5.2 Assess CT Fans Status CT Fans Status Battelle Northwest, 2003 Page 113 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.5.1 Set CT Fans "On" Threshold Calculate the CT Fans "On" Threshold using CT Fans "On" Threshold = CT Fans P x CT Fan Motors Rated Current (or Power) Notes: CT Fans P has values that range from 10 to 50% -- this can be a user input. Battelle Northwest, 2003 Page 114 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.5.2 Assess CT Fans Status For each value of CT Fans Current (or Power), compare CT Fans Current (or Power) to the CT Fans "On" Threshold. If the value of CT Fans Current (or Power) <= CT Fans "On" Threshold, then set CT Fans Status = "Off." If the value of CT Fans Current (or Power) > CT Fans "On" Threshold, then set CT Fans Status = "On." Note: Battelle Northwest, 2003 Page 115 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.6 Determine Condenser Fans Status Condenser Fan Motors Rated current (or Power) 3.6.1 Set Condenser Fans P Condenser Fans "On" Threshold Condenser Fans Current (or Power) Condenser Fans "On" 3.6.2 Threshold Assess Condenser Fans Condenser Fans Status Status Battelle Northwest, 2003 Page 116 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.6.1 Set Condenser Fans "On" Threshold Calculate the Condenser Fans "On" Threshold using Condenser Fans "On" Threshold = Condenser Fans P x Condenser Fan Motors Rated Current (or Power) Notes: Condenser Fans P has values that range from 10 to 50% -- this can be a user input. Battelle Northwest, 2003 Page 117 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.6.2 Assess Condenser Fans Status For each value of Condenser Fans Current (or Power), compare Condenser Fans Current (or Power) to the Condenser Fans "On" Threshold. If the value of Condenser Fans Current (or Power) <= Condenser Fans "On" Threshold, then set Condenser Fans Status = "Off." If the value of Condenser Fans Current (or Power) > Condenser Fans "On" Threshold, then set Condenser Fans Status = "On." Note: Battelle Northwest, 2003 Page 118 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.7 Determine Supply Fans Status Supply Fan Motors Rated current (or Power) 3.7.1 Supply Fans P Set Supply Fans "On" Threshold Supply Fans Current (or Power) Supply Fans "On" Threshold 3.7.2 Assess Supply Fans Status Supply Fans Status Battelle Northwest, 2003 Page 119 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.7.1 Set Supply Fans "On" Threshold Calculate the Supply Fans "On" Threshold using Supply Fans "On" Threshold = Supply Fans P x Supply Fan Motors Rated Current (or Power) Notes: Supply Fans P has values that range from 10 to 50% -- this can be a user input. Battelle Northwest, 2003 Page 120 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 Software Requirements Specification 1-1.DOC 8/29/2003 3.7.2 Assess Supply Fans Status For each value of Supply Fans Current (or Power), compare Supply Fans Current (or Power) to the Supply Fans "On" Threshold. If the value of Supply Fans Current (or Power) <= Supply Fans "On" Threshold, then set Supply Fans Status = "Off." If the value of Supply Fans Current (or Power) > Supplyr Fans "On" Threshold, then set Supply Fans Status = "On." Note: Battelle Northwest, 2003 Page 121 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 5. Appendix B: Chiller, Cooling Tower, and Chilled-Water Distribution Data Dictionary Battelle Northwest, 2003 Page 122 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values Ambient wet-bulb temperature of the outdoor Ambient wb Temperature in degrees F. air. Equivalent to the Outdoor-Air Wet-Bulb Temperature Temperature and Outdoor-Air Temperature Wet-Bulb (OATWB) Wet-bulb temperature of the outdoor air. Ambient Wet-Bulb Temperature in degrees F. Equivalent to Outdoor-Air Wet-Bulb Temperature Temperature and Outdoor-Air Temperature (OATWB) Wet Bulb (OATWB) Equivalent to Outdoor-Air Temperature (OAT) Ambient-Air Temperature in degrees F. and is the dry-bulb temperature of the ambient Temperature (OAT) outdoor air. The value of Chiller Current (or Chiller Power) Chiller "On" On. above which the Chiller Status is considered Threshold "On." The type of cooling for the chiller condenser. It Chiller Condenser Water cooled or air cooled. takes values of “Water cooled” or “Air cooled” Type An indicator of whether the chiller is on or off. Chiller On/off Status On or off. Chiller on/off Status = Compressor on/off Status. Schedule of chiller on and off times during a Chiller Schedule Absolute On/off times day. The schedule may vary based on day of week, type of day (e.g., weekday vs. weekend vs. holiday), or time of year. The schedule does not take into account chiller cycling, which may be caused by changes in load during a scheduled "on" time period. Indicator of whether the chiller is operating only Chiller Schedule Ok. during scheduled times or not. Ok/not Not Ok. The chiller is operating outside its scheduled time. Same as Chiller On/off Status. An indicator of Chiller Status On or off. whether the chiller is on or off. Takes values of "on" or "off." Chiller status = Compressor status. The type of chiller system. Chiller System Chiller System Type Water cooled or air cooled. Estimated time over which the compressor Chiller/Compressor Time difference in minutes. current/power spikes after the compressor is Start-Up Time turned from off to on. This could be estimated manually and entered by the user or might be derived automatically from compressor data in a separate process (not yet specified in this model). Battelle Northwest, 2003 Page 123 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values The maximum temperature increment below CHWdDown Temperature difference in the CHW Setpoint which when subtracted from degrees F. the CHW Setpoint results in the minimum acceptably-controlled CHW Temperature. The maximum temperature increment above CHWdUp Temperature difference in the CHW Setpoint which when added to the degrees F. CHW Setpoint results in the maximum acceptably-controlled CHW Temperature. The status of all the primary chilled water CHW Pumps On or Off. pumps in an associated set taken as a single Collective Status unit. If at least one pump of the set is ON, the collective status is ON. If all the pumps in the set are OFF, the collective status is OFF. Chilled Water Pumps Current (or Power). The CHW Pumps Current Current in amps. measured value of current (or power) for the (or Power) primary CHW pumps motor. Chilled Water Pumps Last Time Turned On. CHW Pumps Last Absolute time in minutes. The time of the last measurement of CHW Time Turned On Water Pumps Status at which the CHW Pumps Status was "On" while the Preceding CHW Pumps Status was "Off." Chilled Water Pumps Max Start-Up Time. The CHW Pumps Max Time in minutes. maximum time that the CHW Pumps should Start-Up Time turn on before the compressor turns on. This can be set by default to 5 minutes. Chilled Water Pumps Motor Rated Current (or CHW Pumps Motor Current in amps. Power). Current (or power) rating of the Rated Current (or primary CHW Pumps motor from the motor Power) nameplate. Chilled Water Pumps P. Fraction of Chilled CHW Pumps P None. Water Pumps Motor Rated Current (or Power) selected for the "On" Threshold. Chilled Water Set Point. The set point for the Temperature in degrees F. CHW Set Point chilled water supply temperature. Chilled Water Supply Temperature. CHWST Temperature in degrees F. Temperature of the chilled water leaving the chiller and entering the chilled water distribution system at the current time. Battelle Northwest, 2003 Page 124 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values A variable indicating the current value of the CHWST Alarm Too high, too low or Ok. alarm for the chilled water supply temperature deviations from set point. It takes values of “Too High”, “Too Low”, and “OK”. It indicates whether the CHW temperature is maintained adequately over a designated minimum number of time steps (CHWST Alarm Interval High and CHWST Alarm Interval Low). The number of time steps immediately CHWST Alarm Number of time steps. preceding the current time over which the Evaluation Interval criterion for a CHWST alarm is evaluated. This parameter takes integer values and is adjustable to change the low-alarm sensitivity. Its value may be specified as a set-up variable, default value, or empirically adjustable. The minimum fraction of values of the variable CHWST Alarm Real values between 0.51 CHWST Maintained OK/not that are equal to Trigger High and 1.00. "Too High", when evaluated over CHWST Alarm Evaluation Interval time steps, for a high alarm to be reported, i.e., for CHWST Alarm to be set equal to “CHWST High.” This variable takes values between 0.51 and 1.0 (i.e., 51% and 100%). It may be a user set-up input, a default value, or a empirically adjusted sensitivity. The current process descriptions assume that High and Low alarms cannot occur simultaneously. The minimum fraction of values of the variable CHWST Alarm Real values between 0.51 CHWST Maintained OK/not that are equal to Trigger Low and 1.00. "Too Low", when evaluated over CHWST Alarm Evaluation Interval time steps for an alarm to be reported, i.e., for CHWST Alarm to be set equal to “CHWST Low.” This variable takes values between 0.51 and 1.0 (i.e., 51% and 100%). It may be a user set-up input, a default value, or a empirically adjusted sensitivity. Chilled Water Supply Temperature measured CHWST at Last Time Temperature in degrees F. the last time the compressor was off. Off CHWST Deviation = CHW Temperature - CHW CHWST Deviation Temperature difference in Setpoint. The amount by which the actual (Chilled Water degrees F. Chilled Water Supply Temperature deviates Supply Temperature from the chilled water set point at the present Deviation) time. Battelle Northwest, 2003 Page 125 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values CHWSTFraction High = CHWSTNumber CHWSTFraction High Dimensionless real number High/(CHWST Alarm Evaluation Interval). This between 0.0 and 1.0. is the fraction of the total number of time steps during the CHWST Alarm Evaluation Interval that have “Too High” as the value for the variable CHWST Maintained OK/not. CHWSTFraction Low = CHWSTNumber CHWSTFraction Low Dimensionless real number Low/(CHWST Alarm Evaluation Interval). This between 0.0 and 1.0. is the fraction of the total number of times steps during the CHWST Alarm Evaluation Interval that have “Too Low” as the value for the variable CHWST Maintained OK/not. The value of the Chilled Water Supply Temperature in degrees F. CHWST Last Temperature (CHWST) corresponding to the last measurement time immediately preceding the current measurement time. Chilled Water Supply Temperature Lower CHWST Lower Temperature difference in Bound = CHW Setpoint - (CHWdDown). It is Bound degrees F. the minimum CHW temperature considered acceptably controlled. Chilled Water Supply Temperature Maintained CHWST Maintained Ok, too high, or too low. OK/not is a variable indicating whether the OK/not (Chilled CHW temperature is maintained adequately at Water Supply a specific point in time (i.e., time step). It takes Temperature values of: "OK," "too high," and "too low." Maintained OK/not) The array: {CHWST Maintained OK/not, CHWST Maintained Array with individual elements CHWST Maintained OK/not (1 time step ago), OK/not Array takings values of Ok or Not CHWST Maintained OK/not (2 time steps ago), OK. CHWST Maintained OK/not (3 time steps ago), CHWST Maintained OK/not (4 time steps ago), CHWST Maintained OK/not [(CHWST Alarm Evaluation Interval – 1) time steps ago]} Arithmetic mean value of the CHWST CHWST Mean Too- Temperature in degrees F. Deviation for times included in the CHWST High Deviation Maintained OK/not Array for which CHWST Maintained OK/not is “Too High”. Arithmetic mean value of the CHWST CHWST Mean Too- Temperature in degrees F. Deviation for times included in the CHWST Low Deviation Maintained OK/not Array for which CHWST Maintained OK/not is “Too Low”. CHWSTNumber High is the number of values CHWSTNumber High Integer. of the variable CHWST Maintained OK/not with values of “Too High” during the last CHWST Alarm Evaluation Interval time steps. Battelle Northwest, 2003 Page 126 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values CHWSTNumber Low is the number of values CHWSTNumber Low Integer. of the variable CHWST Maintained OK/not with values of “Too Low” during the last CHWST Alarm Evaluation Interval time steps. Chilled Water Supply Temperature Upper CHWST Upper Temperature in degrees F. Bound = CHW Setpoint + (CHWdup). It is the Bound maximum CHW temperature considered acceptably controlled. Chilled Water Temperature. Same as Chilled CHW Temperature Temperature in degrees F. Water Supply Temperature. Fraction of the difference between the Chilled CHW Transient Dimensionless real number Water Supply Temperature (CHWST) at Last Decrease Factor between 0.0 and 1.0 Off Time and the CHWST Setpoint that is used to determine the Minimum Transient Decrease in CHWST. It takes values between 0 and 1.0 and may be a user (setup) input, a default value, or a value determined empirically during diagnosis (i.e. use of the diagnostic tool). The value of Compressor Current (or Compressor "On" Current in amps. Compressor Power) above which the Threshold Compressor is considered "on." Used to determine if the chiller is "on." The measured value of current (or power) at Compressor Current Current in amps. the current time for the compressor motor. (or Power) An indicator of whether the compressor and Compressor OK the CHW Pumps are properly interlocked or Interlocked With not. It takes values of "OK" and "Not OK." Not OK. CHW Pumps OK/not An indicator of whether the compressor and OK Compressor the Condenser Fans are properly interlocked or Interlock with Not OK. not. It takes values of "OK" and "Not OK." Condenser Fans OK/Not An indicator of whether the compressor and Compressor OK the Condenser Pumps are properly interlocked Interlocked With or not. It takes values of "OK" and "Not OK." Not OK. Condenser Pumps OK/not Current (or power) rating of the compressor Compressor Motor Current in amps. motor from the motor nameplate. Rated Current (or Power) An indicator of whether the compressor is Compressor Off OK meeting the Minimum Compressor Off Time Cycle OK/not while cycling between off and on. It takes Not OK. values of “OK” and “Not OK.” Battelle Northwest, 2003 Page 127 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values An indicator of whether the compressor is Compressor On OK meeting the Minimum Compressor On Time Cycle OK/not while cycling between on and off. It takes Not OK. values of “OK” and “Not OK.” Same as Compressor status. An indicator of Compressor On/off On or off. whether the compressor is on or off. Takes Status values of "on" or "off." Chiller on/off Status = Compressor on/off Status. Fraction of Compressor Motor Rated Current Compressor P Dimensionless real number (or Power) selected for the "On" Threshold between 0.0 and 1.0. An indicator of whether the chiller is in an off, a Compressor State Off, transient, or steady. transient, or a steady state, where the difference between steady and transient operation is indicated by the rate of change of the chilled water supply temperature (CHWST). Takes values of “Off,” “Transient,” or “Steady.” Same as Compressor On/off Status. An Compressor Status On or off. indicator of whether the compressor (and, therefore the chiller) is on or off. Takes values of "on" or "off” as indicated by the Compressor Current. Also indicates Chiller Status, i.e., Chiller Status = Compressor Status. Current (or power) rating of the condenser fan Condenser Fan Current in amps. motors from the motor nameplates. Motors Rated Current (or Power) Fraction of Condenser Fan Motors Rated Condenser Fans P Dimensionless real number Current (or Power) selected for the "On" between 0.0 and 1.0. Threshold. The value of Condenser Fans Current (or Condenser Fans Current in amps. Power) above which the condenser fans are "On" Threshold considered "on." Used to determine if the condenser fans are "on." For air-cooled condensers, the measured value Condenser Fans Current in amps. of current (or power) for the condenser fans Current (or Power) For air-cooled chillers, an indicator of whether Condenser Fans On or off. the condenser fans is (are) on or off. Takes Status values of "on" or "off." Fraction of Condenser Pump Motors Rated Condenser Pumps P Current in amps. Current (or Power) selected for the "On" Threshold Battelle Northwest, 2003 Page 128 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values The value of Condenser Pumps Current (or Condenser Pumps Current in amps. Power) above which the Condenser Pumps are "On" Threshold considered "on." Used to determine if the condenser pumps are "on." The measured value of the electric current to Condenser Pumps Current in amps. the chiller condenser pumps at the current Current (CPC) time. The measured value of the electric current to Condenser Pumps Current in amps. the chiller condenser pumps at the current Current (CPC) time. Condenser Pumps Same as CPC. Current in amps. Current (or Power) Condenser Pumps The time of the last measurement of Time in minutes. Last Time Turned On Condenser Pumps Status at which the Condenser Pumps Status was "On" while the Preceding Condenser Pumps Status was "Off." Condenser Pumps The maximum time that the condenser pumps Time in minutes. Max Start-Up Time should turn on before the compressor turns on. This can be set by default to 5 minutes. Condenser Pumps Variable indicating whether the condenser On or Off. Status pumps are on or off Condenser Type Takes values of "water cooled" or "air cooled." Water cooled or air cooled. Condenser-Pumps Current (or power) rating of the condenser Current in amps. Motor Rated Current pumps motor from the motor nameplate. (or Power) CT Approach An indicator of the maximum CT approach Temperature difference in Benchmark acceptable for the cooling tower when degrees F. providing maximum cooling (i.e., when the sump temperature is at or above the setpoint and the fans running continuously). Assumed to be available as a user input based on: 1) the control specification or 2) the manufacturer’s specification. CT Cycling OK/Not Variable that indicates whether the cycling of OK or Not OK. the cooling tower fans is OK or not. If it cycles too frequently, the fan motors may be damaged reducing their lives. Battelle Northwest, 2003 Page 129 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values Cooling Tower Fan Motors Rated Current (or CT Fan Motors Rated Current in amps. Power). Current (or power) rating of the Current (or Power) cooling tower fan motors from the motor nameplates. Cooling Tower Fans Current (or Power). The CT Fans Current (or Amps. measured value of the electrical current (or Power power) to the cooling tower fan motors at the current time. The cooling tower “on” set point = the value of CT Fans "On" Set Temperature in degrees F. the sump temperature above which the cooling Point tower fans are turned on. Cooling Tower Fans "On" Threshold. The CT Fans "On" Current in amps. value of Cooling Tower Fans Current (or Threshold Power) above which the cooling tower fans are considered "on." Used to determine if the cooling tower fans are "on." The cooling tower “off” set point = the value of CT Fans “Off” Set Temperature in degrees F. the sump temperature below which the cooling Point tower fans are turned off. Cooling Tower Fans P. Fraction of Cooling CT Fans P Current in amps. Tower Fan Motors Rated Current (or Power) selected for the "On" Threshold. Variable indicating whether the fan staging is CT Fans Staging "OK (as far as we can tell)." Ok or not. OK/Not "OK." "Not OK. There is a fan staging problem and the cooling tower is not maintaining the Sump Temp as low as it could/should." "Not OK. There is a fan staging problem and energy is being wasted. All CT Fans should be off." Cooling Tower Fans Status. For water cooled CT Fans Status On or Off. chillers, a variable indicating whether the cooling tower fans are on or off. Takes values of "on" or "off." An indicator of whether the cooling tower fans CT Fans/Condenser OK or Not OK. and the condenser pumps are properly Pumps Interlock interlocked or not. OK/Not Battelle Northwest, 2003 Page 130 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values Temperature of the cooling water entering the CT Inlet Temperature Temperature in degrees F. cooling tower. This temperature will be very close to the temperature of the water leaving the condenser of the chiller. Cooling Tower Range = The difference CT Range Temperature difference in between the temperature of the water entering degrees F. the cooling tower (cooling tower inlet temperature) and the temperature of the water leaving the cooling tower (outlet temperature). CT Range Benchmark for comparison of calculated Degrees F. Benchmark values of the CT range (may be a user input based on the control spec, specified by the manufacturer or determined by analysis of operating data. TBD) CT Range OK/Not Variable indicating whether the CT range OK or calculated from measurements is equal or greater than the expected range (given by the Not OK. There is a problem CT Range Benchmark), in which case it is OK, with CT heat rejection and it or whether it is less than expected, in which is performing at less than case it is not OK because the cooling tower is expected capacity. transferring less heat at maximum capacity than expected. The setpoint for the water in the cooling tower CT Sump Temp Temperature in degrees F. sump, i.e., the temperature setpoint for the Setpoint water leaving the cooling tower. CT Sump The temperature of the cooling tower sump, Temperature in degrees F. Temperature which is the same as the temperature of the water leaving the cooling tower of the cooling tower outlet temperature. Current Time The time of the current time step Time in minutes. Identification of This data flow represents the collection of all Condition output data from the diagnostic process(es), which characterize the condition of the equipment/systems undergoing diagnosis. This term is only used on the chiller context diagram. All other diagrams show individual data flows. Last Chilled Water The value of the CHW Pumps Status at the On or Off Pumps Status (Last measurement time immediately preceding the CHW Pumps Status) current measurement time (i.e., at the last measurement time). Battelle Northwest, 2003 Page 131 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values The value of Chiller Status at the measurement Last Chiller Status On or Off time immediately preceding the current measurement time (i.e., the last measurement time). Last Chiller Status = Last Compressor Status. Chilled Water Supply Temperature Last CHWST for Temperature in degrees F. corresponding to the last measurement time Compressor "On" when the compressor was on immediately Time preceding the current measurement time. The length of time the compressor was off the Last Compressor Off Time difference in minutes. last time it was off. Last Compressor Off Interval Interval = Last Compressor Switch On Time – Last Compressor Switch Off Time. Only evaluated when the compressor is currently on. The last time at which the Compressor turned Last Compressor Time in minutes. off, i.e., the last measurement time at which the Switch Off Time Compressor Status changed from “On” to “Off.” The length of time the compressor was on the Last Compressor On Time difference in minutes. last time it was on. Last Compressor On Interval Interval = Last Compressor Off Time – Last Compressor On Time. Only evaluated when the compressor is currently off. The last time at which the Compressor turned Last Compressor Time in minutes. on, i.e., the last measurement time at which the Switch On Time Compressor Status changed from “Off” to “On.” The value of Compressor State at the Last Compressor Time in minutes. measurement time immediately preceding the State current measurement time (i.e., the last measurement time). The value of Compressor Status at the Last Compressor Time in minutes. measurement time immediately preceding the Status current measurement time (i.e., the last measurement time). Last Compressor Status = Last Chiller Status. The value of Condenser Pumps Status at the Last Condenser Time in minutes. measurement time immediately preceding the Pumps Status current measurement time (i.e., the last measurement time). Last CT Fan Off The length of time the CT fans were off the last Time difference in minutes. Interval time they were off. Last CT Fan Off Interval = Last CT Fans On Time – Last CT Fans Off Time. Only evaluated when the compressor is currently on. Battelle Northwest, 2003 Page 132 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values Last CT Fans Off The last time at which the CT Fans turned on, Absolute time in minutes. Time i.e., the last measurement time at which the CT fans status changed from “Off” to “On.” Last CT Fans On The last time at which the CT Fans turned off, Absolute time in minutes. Time i.e., the last measurement time at which the CT fans status changed from “On” to “Off.” Last CT Fans Status The value of the CT fans status at the On or Off. measurement time immediately preceding the current measurement time (i.e., at the last measurement time). Last Fans On Interval The length of time the CT fans were on the last Time difference in minutes. time they were on. Last CT Fan On Interval = Last CT Fans Off Time – Last CT Fans on Time. Only evaluated when the compressor is currently off. The time at which measured (or metered) data Measurement Time Time in minutes. are collected. The collection of all input data that is collected Metered Data periodically from sensors or observations. Values of metered data are updated periodically at the measurement frequency. It can be contrasted with set-up data, which is generally collected only once. Metered data is generally used to characterize the condition (or state) of the equipment and systems at a particular point in time. This term is used only on the chiller context diagram. All other diagrams show individual data flows. Min. CT Fans Off The minimum permissible time increment that Time in minutes. Time the cooling tower fans should be off before being turned on again in order to prevent damage to the fan motors during fan cycling, as specified by the manufacturer. Min. CT Fans On The minimum permissible time increment that Time in minutes. Time the cooling tower fans should be on before being turned off again in order to prevent damage to the fan motors during fan cycling, as specified by the manufacturer. Battelle Northwest, 2003 Page 133 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values The minimum time specified by the Minimum Time in minutes. manufacturer (or other authority) that the Compressor Off Time compressor should be off before being turned back on again. The minimum time specified by the Minimum Time in minutes. manufacturer (or other authority) that the Compressor On Time compressor should be on before being turned back off again. The minimum transient decrease in the chilled Minimum Transient Temperature difference in F. water supply temperature. This is the Decrease in CHWST minimum change in chilled water supply temperature between two sequential measurement times that would be judged as corresponding to a transient compressor state. All values of the change in CHWST between two successive measurement times would be judged as corresponding to a steady state for the compressor. Outdoor-Air Temperature while the Chilled OAT Steady State Temperature in degrees F. Water Temperature is in a steady state, i.e., CHW when Compressor State = Steady. Equivalent to Ambient-Air Temperature (OAT) Outdoor-Air Temperature in degrees F. and is the dry-bulb temperature of the ambient Temperature (OAT) outdoor air. Wet-bulb temperature of the outdoor air. Outdoor-Air Temperature in degrees F. Equivalent to Ambient Wet-Bulb Temperature Temperature Wet and Outdoor-Air Wet-Bulb Temperature Bulb (OATWB) Wet-bulb temperature of the outdoor air. Outdoor-Air Wet- Temperature in degrees F. Equivalent to Ambient Wet-Bulb Temperature Bulb Temperature and Outdoor-Air Temperature Wet Bulb (OATWB) (OATWB) Passed (Filtered) CT Values of the CT approach for times when the Temperature difference in Approach condenser pumps status is “on” degrees F Passed (Filtered) Values of the Ambient wb temperature for Temperature in degrees F. Ambient wb Temp times when the condenser pump status is “on” Passed (Filtered) CT Values of the sump temperature for times Temperature in degrees F Sump Temp when the condenser pumps are on. Passed (Filtered) CT Values of the CT range for times when the Temperature difference in Range condenser pumps status is “on” degrees F Passed (Filtered) CT Values of the Fans Current for times when the Current in amps Fans Current condenser pumps are on. Battelle Northwest, 2003 Page 134 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values Passed (Filtered) CT Values of the CT Fans Current occurring when Current in amps Fans Current the Condenser Pumps status is “on” (i.e., belong to triplets for which Condenser Pumps Status = On). Passed (Filtered) CT Values of the CT Fans Status occurring when On Fans Status the Condenser Pumps status is “on” (i.e., belong to triplets for which Condenser Pumps Off Status = On). Passed Ambient wb Values of the ambient wb temperature for Temperature in degrees F. Temp Points for times when the condenser pumps are on, the Condenser Pumps CT fans status is on, and the sump On, temperature is above its setpoint CT Fans Status On, and Sump Temp Above the CT Fans "On" Setpoint Passed CT Range for Values of the CT Range for times when the Temperature difference in Condenser Pumps condenser pumps are on, the CT fans status is degrees F On, on, and the sump temperature is above its CT Fans Status On, setpoint and Sump Temp Above the CT Fans "On" Setpoint The Condenser Pumps Status at the Preceding On or Off. measurement time immediately preceding the Condenser Pumps measurement time to which reference is made. Status Rejected Ambient wb Values of the ambient temperature that Temperature in degrees F Temp Points for CT correspond to times when the condenser Fans Status Off pumps are on and either or both the CT fans and/or for Sump status are off or the sump temperature is below Temp Below the CT or equal to its setpoint. Fans "On" Setpoint Rejected Ambient wb Values of ambient wb temperature that Temperature in degrees F Temp When correspond to times when the condenser Condenser Pumps pumps are off, which are filtered out are "Off" Rejected values of CHWST corresponding to Rejected CHWST for Temperature in degrees F. times when the Compressor State = Non-Steady CHWST “Transient”, or Compressor State = “Off”, i.e., when the CHWST is not steady. Rejected CT Values of CT Approach and Ambient wb Approach and Temperature that correspond to times when Ambient wb Temp the condenser pumps are off, which are filtered When Condenser out Pumps are "Off" Battelle Northwest, 2003 Page 135 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values Rejected CT Values of the CT Approach and ambient Approach and temperature that correspond to times when the Ambient wb Temp CT fans status is “off” and/or the sump Points for CT Fans temperature is below the CT Fans “On” set Status Off and/or for point. Sump Temp Below the CT Fans "On" Setpoint Rejected CT Fans Values of the CT Fans Current for times when Current in amps Current When the condenser pumps are off. Condenser Pumps are "Off" Rejected CT Range Values of the CT Range that correspond to Temperature difference in for CT Fans Status times when the condenser pumps are on and degrees F Off and/or Sump either or both the CT fans status is off or the Temp Below the sump temperature is below or equal to its CT Fans "On" setpoint. Setpoint Rejected CT Range Values of CT Range that correspond to times Temperature difference in When Condenser when the condenser pumps are off, which are degrees F Pumps are "Off" filtered out Rejected CT Sump Values of the Sump Temperature at times Temperature in degrees F Temp When when the condenser pumps are off Condenser Pumps are "Off" Rejected values of OAT corresponding to times Rejected OAT for Temperature in degrees F. when the Compressor State = “Transient” or Non-Steady CHWST Compressor State = “Off”, i.e., when the CHWST is not steady. The status of all the secondary chilled water Secondary CHW On or Off. pumps in an associated set taken as a single Pumps Collective unit. If at least one pump of the set is ON, the Status collective status is ON. If all the pumps in the set are OFF, the collective status is OFF. Secondary CHW Secondary Chilled Water Pumps Motor Rated Current in amps. Pumps Motor Rated Current (or Power). Current (or power) rating Current (or Power) of the secondary CHW pump motor from the motors nameplate(s). Battelle Northwest, 2003 Page 136 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values The value of Secondary CHW Pumps Current Secondary CHW Current in amps. (or Power) above which the secondary CHW Pumps "On" Pumps is considered "on." Used to determine Threshold if the secondary chilled water Pumps is (are) "on." Secondary Chilled Water Pumps P. Fraction of Secondary CHW Dimensionless real number Secondary Chilled Water Pumps Motors Rated Pumps P between 0.0 and 1.0. Current (or Power) selected for the "On" Threshold. The measured value of current (or power) for Secondary CHW Current in amps. the secondary CHW Pumps at the current time. Pumps Current (or Power) For chilled water distribution systems with Secondary/Primary Ok. secondary CHW pumps. An indicator of CHW Pumps whether the primary CHW pumps and the Not Ok. Interlock OK/not secondary CHW pumps served by it are properly interlocked or not. It takes values of "OK" and "Not OK." The collection of all input data that Set-up Data characterizes the equipment and systems in place in the building as well as its performance. It is generally entered only once for a specific building or specific piece of equipment and can be contrasted with metered data which is collected periodically. This term is used only on the chiller context diagram. All other diagrams show individual data flows. Sump Temp Control A variable indicating whether the sump OK OK/Not temperature control is OK or not at the current time Not OK. The CT fans are off but should be on. Not OK. The CT fans are on but should be off. Supply Fan Motors Current (or power) rating of the supply fan Current in amps. Rated Current (or motors from the motor nameplates. Power) Supply Fans Status An indicator of whether the supply fans are on On or off or off. Takes values of "on" or "off." Supply Fans "On" The value of Supply Fans Current (or Power) Current in amps. Threshold above which the supply fans are considered "on." Used to determine if the supply fans are "on." Battelle Northwest, 2003 Page 137 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values The measured value of current (or power) for Supply Fans Current Current in amps. the supply fans. (or Power) Fraction of Supply Fan Motors Rated Current Supply Fans P Dimensionless real number (or Power) selected for the "On" between 0.0 and 1.0. Threshold. For chilled water distribution systems with Supply Ok. secondary pumps. An indicator of whether the Fans/Secondary secondary CHW pumps and the supply fans for Not Ok. CHW Pumps the air handlers served by them are properly Interlock OK/not Not OK," and "Possible interlocked or not. It takes values of "OK," "Not problem with supply fan OK," and "Possible problem with supply fan control--check to see if loads control--check to see if loads in the spaces in the spaces served are served are being met." being met. An indicator of whether the primary CHW Supply Fans/CHW Ok. pumps and the supply fans for the air handlers Pumps Interlock served by them are properly interlocked or not. Not Ok. OK/not It takes values of "OK," "Not OK," and Possible problem with supply "Possible problem with supply fan control-- fan control--check to see if check to see if loads in the spaces served are loads in the spaces served being met" are being met. The total number of time steps for which Total Number of Integer. processing has been performed since Time Steps processing was started and up to the current Processed time. It takes integer values. Variable that indicates whether water side Water side Yes economizing is used or not. Economizing No Battelle Northwest, 2003 Page 138 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 6. Appendix C: Data Flow Diagrams for Boiler Diagnostic Processes Battelle Northwest, 2003 Page 139 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Context Diagram Boiler Setup Data (Static) 0.0 Diagnose Boiler Metered Data Identification of Condition \ Battelle Northwest, 2003 Page 140 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 0.0 Diagnose Boiler Boiler_Off_ Date_dUp Boiler_Shutoff_ HW_Pump_Motor_ Boiler_Off_ OK/Not Rated_Current Date_dDown 6.0 Boiler_Off_Date Determine HW_Pump_P 1.0 Diagnose Hot-Water Boiler_On_Date Boiler Pump State dDown Shutoff Boiler_On_ Boiler_ Current_Time** HW_Pump_ Date_dUp Schedule_Type Current Boiler_On_Date HW_Pump_ Status Current_Date HW_Pump_ HW_Pump_ 5.0 Boiler Fuel Run_Limit Shutoff_OK/Not Diagnose Boiler_Capacity HW Pump Design_HWST Shutoff HWST_Too_ Boiler_Stage Boiler_Status Low_Window _Power 4.0 HWST_Too_ Determine High_Window FHWST_ Boiler_On_ Boiler State HWST_Setpoint- High_Limit Threshold_ Boiler_Last_ Current Electric_P On_Time HWST* FHWST_ HWST* Boiler_Last_ 2.0 Low_Limit Boiler_NextTo_ Off_Time Diagnose Last_On_Time Hot Water Boiler_NextTo_ HWST_dDown Temperature Current_time** Last_Off_Time Control HWST_dUp HWST_Maintained_OK/Not 3.0 Diagnose HWST_Deviation TimeStep Boiler Cycling Min_Normal_Boiler_ * HWST appears as an input twice on the diagram into On_Duration 4.0 and into 2.0. Min_Normal_Boiler_ Off_Duration Boiler_Cycling_ **Current_time appeasrs as an input twice on the Max_Normal_ OK/Not diagram, once as an input for 4.0 and 3.0 and once as Boiler_CPH an niput into 5.0. Battelle Northwest, 2003 Page 141 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 1.0 Diagnose Boiler Shutoff Boiler_Schedule_Type 1.1 Diagnose Always-On Boiler Shutoff Boiler_On_Date Boiler_Shutoff Current_Date OK/Not Boiler_On_Date_dUp Boiler_On_Date_ dDown 1.2 Diagnose Boiler_Off_Date Manual-shutoff Boiler Shutoff Boiler_Off_Date dDown Boiler_Off_Date dUp Boiler_Shutoff_OK/Not Boiler_Status, Note: No diagnosis is provided for Ambient-Temperature-Based or other temperature-based boiler shutoffs. Further develelopment is required for these diagnostic procedures. Battelle Northwest, 2003 Page 142 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 1.1 Diagnose Always-On-Boiler Shutoff If Boiler_Schedule_Type = "Always On" AND Boiler_Status = "On" Set Boiler_Shutoff_OK/Not = "OK. The boiler is on as it should be. Shutoff is not applicable to this boiler. The boiler system is designed for continous operation." If Boiler_Schedule_Type = "Always On" AND Boiler_Status = "Off" Set Boiler_Shutoff_OK/Not = "Not OK; the boiler is off and it should be on always, unless it is locked out temporarily for maintenance or repair." Battelle Northwest, 2003 Page 143 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 1.2 Diagnose Manual-shutoff-Boiler Shutoff If Boiler_Schedule_Type = "Manual Shutoff" AND Boiler_Status = "On" AND if Current_Date > Boiler_On_Date + Boiler_On_Date_dUp Set Boiler_Shutoff_OK/Not = "OK; the boiler is on as it should be." If Boiler_Schedule_Type = "Manual Shutoff" AND Boiler_Status = "Off" AND if Current_Date > Boiler_On_Date + Boiler_On_Date_dUp Set Boiler_Shutoff_OK/Not = "Not OK; the boiler is off when it should be on." If Boiler_Schedule_Type = "Manual Shutoff" AND Boiler_Status = "On" AND if Current_Date < Boiler_Off_Date - Boiler_Off_Date_dDown, Set Boiler_Shutoff_OK/Not = "OK; the boiler is on as it should be." If Boiler_Schedule_Type = "Manual Shutoff" AND Boiler_Status = "Off" AND if Current_Date < Boiler_Off_Date - Boiler_Off_Date_dDown, Set Boiler_Shutoff_OK/Not = "Not OK; the boiler is off when it should be on." If Boiler_Schedule_Type = "Manual Shutoff" AND Boiler_Status = "Off" AND If Current_Date < Boiler_On_Date - Boiler_On_Date_dDown, AND If Current_Date > Boiler_Off_Date + Boiler_Off_Date_dUp, Set Boiler_Shutoff_OK/Not = "OK; the boiler is off as it should be" If Boiler_Schedule_Type = "Manual Shutoff" AND If Current_Date > Boiler_On_Date - Boiler_On_Date_dDown, AND If Current_Date < Boiler_On_Date + Boiler_On_Date_dUp, Set Boiler_Shutoff_OK/Not = "Ok; the date is too close to the Boiler On Date to evaluate compliance with the schedule." If Boiler_Schedule_Type = "Manual Shutoff" AND If Current_Date > Boiler_Off_Date - Boiler_Off_Date_dDown, AND If Current_Date < Boiler_Off_Date + Boiler_Off_Date_dUp, Set Boiler_Shutoff_OK/Not = "Ok; the date is too close to the Boiler Off Date to evaluate compliance with the schedule." Battelle Northwest, 2003 Page 144 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 2.0 Diagnose Hot Water Temperature Control HWST_Setpoint- Current HWST FHWST_ HWST_Too_ Low_Limit Low_Window FHWST_ 2.1 High_Limit Evaluate HWST_Too_ Current Hot High_Window Water Temperature Control HWST_dDown 2.2 HWST_dUp Evaluate Long- HWST-SP_ Term HWST Maintained_OK/Not Control HWST_Deviation HWST_Maintained_OK/Not Battelle Northwest, 2003 Page 145 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 2.1 Evaluate Current Hot Water Temperature Calculate the upper bound for acceptable Hot Water Supply Temperature using HWST Upper Bound = HWST_Setpoint-Current + HWST_dUp Calculate the lower bound for acceptable Hot Water Supply Temperature using HWST Lower Bound = HWST_Setpoint-Current - HWST_dDown Compare the Hot Water Supply Temperature (HWST) to the HWST Upper Bound and HWST Lower Bound. If HWST > HWST Upper Bound, then Set HWST-SP_Maintained_OK/Not = "Too high" for the current time. If HWST < HWST Lower Bound, then Set HWST-SP_Maintained_OK/Not = "Too low" for the current time. If HWST <= HWST Upper Bound, AND HWST >= HWST Lower Bound, then Set HWST_Maintained_OK/Not = "OK" for the current time. Calculate the HWST Deviation for the current time HWST_Deviation = HWST - HWST_Setpoint-Current. Battelle Northwest, 2003 Page 146 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 2.2 Evaluate Long-Term HWST Control HWST_Too_ Low_Window FHWST_ Low_Limit FHWST_ 2.2.1 High_Limit Update Hot Water Temp Low Alarm HWST-SP_ Variables Maintained_OK/Not FHWST_Low 2.2.2 Time_Steps_ Evaluate Hot- Processed Water Temperature Alarm Conditions 2.2.3 Update Hot Water Temp FHWST_High HWST_Too_ High Alarm High_Window HWST_Maintained_OK/Not Variables Battelle Northwest, 2003 Page 147 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 2.2.1 Update Hot Water Temp Low Alarm Variables Update the Time_Steps_Processed, using Time_Steps_Processed = Time_Steps_Processed + 1 Update the value of FHWST_Low based on the latest value of HWST_Maintained_OK/Not. Update the HWST_Maintained_OK/not_Too-Low_Array Update all values in the array, adding the current value of HWST_Maintained_OK/not to the array and by dropping the oldest value of HWST_Maintained_OK/not from the array. Update value for HWSTNumber_Low. Set HWSTNumber_Low = number of values "Too Low" appearing in HWST_Maintained OK/Not_Too-Low_Array. If Total_Number_of_Time_Steps_Processed < HWST_Too_Low_Window, then set HWSTNumber_Low = 0. Calculate the new value of FHWST_Low. FHWST_Low = HWSTNumber_Low/(HWST_Too_Low_Window) Battelle Northwest, 2003 Page 148 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 2.2.2 Evaluate Hot-Water Temperature Alarm Conditions Check if the long-term average hot-water supply tempeature (HWST) is adequately maintained or whether it is high or low by comparing FHWST_High and FHWST_Low with thir repective limits. If FHWST_High >= FHWST_High_Limit, Set HWST_Maintained_OK/Not = "Too high" If FHWST_Low >= FHWST_Low_Limit, Set HWST_Maintained_OK/Not = "Too low" If FHWST_High < FHWST_HIgh_Limit, AND FHWST_Low < FHWST_Low_Limit, Set HWST_Maintained_OK/Not = "OK" Battelle Northwest, 2003 Page 149 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 2.2.3 Update Hot Water Temp High Alarm Variables Update the value of FHWST_High based on the latest value of HWST_Maintained_OK/Not. Update the HWST_Maintained_OK/not_Too-High_Array Update all values in the array, adding the current value of HWST_Maintained_OK/not to the array and by dropping the oldest value of HWST_Maintained_OK/not from the array. Update value for HWSTNumber_High. Set HWSTNumber_High = number of values "Too High" appearing in HWST_Maintained_OK/ not_Too-High_Array. If Total Number of Time Steps Processed < HWST_Too_High_Window, then set HWSTNumber_High = 0. Calcluate the new value of FHWST_High. FHWST_High = HWSTNumber_High/(HWST_Too_High_Window) Battelle Northwest, 2003 Page 150 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 3.0 Diagnose Boiler Cycling Boiler_Last_On_Time 3.2 Latest_Complete_Boiler_ Calculate On On_Duration and Off Boiler_Last_Off_Time Duration and Cycles Boiler_NextTo_Last_On_Time Latest_Complete_Boiler_ Off_Duration Boiler_NextTo_Last_Off_Time 3.3 Diagnose Boiler_Status Boiler Cycling Behavior 3.4 Boiler_Cycling Calcluate Boiler_Cycles_Past_Hour OK/Not boiler cycles Current_time per hour Min_Normal_Boiler_ Max_Normal_Boiler_ On_Duration CPH TimeStep Min_Normal_Boiler_ Off_Duration Battelle Northwest, 2003 Page 151 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 3.2 Calculate On and Off Duration and Cycles Calculate Latest_Complete_Boiler_On_Duration If Boiler_Status = "On" Set Latest_Complete_Boiler_On_Duration = Boiler_Last_Off_Time - Boiler_NextTo_Last_On_Time If Boiler_Status = "Off" Set Latest_Complete_Boiler_On_Duration = Boiler_Last_Off_Time - Boiler_Last_On_Time Calculate Latest_Complete_Boiler_Off_Duration If Boiler_Status = "Off" Set Latest_Complete_Boiler_Off_Duration = Boiler_Last_On_Time - Boiler_NextTo_Last_Off_Time If Boiler_Status = "On" Set Latest_Complete_Boiler_Off_Duration = Boiler_Last_On_Time - Boiler_Last_Off_Time Battelle Northwest, 2003 Page 152 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 3.3 Diagnose Boiler Cycling Behavior If Boiler_Cycles_Past_Hour > Max_Normal_Boiler_CPH, AND Latest_Complete_Boiler_On_Duration < Min_Normal_Boiler_On_Duration AND Latest_Complete_Boiler_Off_Duration < Min_Normal_Boiler_Off_Duration, then set Boiler_Cycling_OK/Not = "Not OK. The Boiler is cycling on and off excessively." If Boiler_Cycles_Past_Hour > Max_Normal_Boiler_CPH, AND Latest_Complete_Boiler_On_Duration < Min_Normal_Boiler_On_Duration, AND Latest_Complete_Boiler_Off_Duration >= Min_Normal_Boiler_Off_Duration, then set Boiler_Cycling_OK/Not = "Not OK. The Boiler is cycling on excessively." If Boiler Cycles Past Hour > Max_Normal_Boiler_CPH AND Latest_Complete_Boiler_On_Duration >= Min_Normal_Boiler_On_Duration, AND Latest_Complete_Boiler_Off_Duration < Min_Normal_Boiler_Off_Duration, then set Boiler_Cycling_OK/Not = "Not OK. The Boiler is cycling off excessively." If Boiler Cycles Past Hour <= Max_Normal_Boiler_CPH, then set Boiler_Cycling_OK/Not = "OK." Battelle Northwest, 2003 Page 153 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 3.4 Calcluate boiler cycles per hour Set number of time steps in an hours Set Nmax = 60/TimeStep Update Boiler_Status_Array Boiler_Status(Current_time - Nmax * TimeStep) = Boiler_Status[Current_time - (Nmax - 1) * TimeStep] Boiler_Status[Current_time - (Nmax - 1) * TimeStep] = Boiler_Status[Current_time - (Nmax - 2) * TimeStep] (cid:159) (cid:159) (cid:159) Boiler_Status(Current_time - 2 * TimeStep) = Boiler_Status(Current_time - TimeStep) Boiler_Status(Current_time - TimeStep) = Boiler_Last_Status Boiler_Status(Current_time) = Boiler_Status Calculate Boiler_Cycles_Past_Hour. Assign BSNumber(nt) for all values of nt from -Nmax to 0, If Boiler_Status = "On," set BSNumber(nt) = 1. If Boiler_Status = "Off," set BSNumber(nt) = 0. Set Cycle_Counts = 0 Evaluate the following for each value of nt for -Nmax <= nt <= 0 (zero corresponding to the current time and -Nmax corresonding to Nmax time steps ago) If Boiler_Status(Current_time) = "Off" AND BSNumber(nt+1) - BSNumber(nt) < 0 Set Cycle_Counts = Cycle_Counts + 1 If Boiler_Status(Current_time) = "Off" AND BSNumber(nt+1) - BSNumber(nt) >= 0 Set Cycle_Counts = Cycle_Counts If Boiler_Status(Current_time) = "On" AND BSNumber(nt+1) - BSNumber(nt) > 0 Set Cycle_Counts = Cycle_Counts + 1 If Boiler_Status(Current_time) = "On" AND BSNumber(nt+1) - BSNumber(nt) <= 0 Set Cycle_Counts = Cycle_Counts If nt < 0, repeat for next value of nt. If nt = 0, Set Boiler_Cycles_Past_Hour = Cycle_Counts - 1 Note: We can probably specify more efficient ways to update the variables used in this cycle coutning procedure. Battelle Northwest, 2003 Page 154 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 4.0 Determine Boiler State Boiler_Fuel Boiler_Capacity 4.1 Design_HWST Determine Boiler On Boiler_On_Threshold_Electric Threshold Boiler_On_ Threshold_Fossil Boiler_Status 4.2 Boiler_On_Threshold_Electric_P Determine Boiler Status Boiler_Stage_Power Boiler_Last_Status HWST 4.3 Determine Boiler_Last_On_Time Boiler Last On Current_time and Off Times Boiler_Last_Off_Time Boiler_NextTo_ Last_On_Time Boiler_NextTo_ Last_Off_Time Battelle Northwest, 2003 Page 155 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 4.1 Determine Boiler On Threshold Determine the Boiler Type and set corresponding Boiler "On" threshold. If Boiler_Fuel = Electric, then Set Boiler_On_Threshold_Electric = Boiler_On_Threshold_Electric_P * Boiler_Capacity, and Set Boiler_On_Threshold_Fossil = null If the Boiler_Fuel = Fossil, then Set Boiler_On_Threshold_Fossil = (Design_HWST + 75 )/2, and Set Boiler_On_Threshold _Electric = null Battelle Northwest, 2003 Page 156 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 4.2 Determine Boiler Status Update Boiler_Last_Status, Boiler_Last_Status = Boiler_Status Check if the boiler on thresholds are exceeded. and set the boiler status accordingly. If Boiler_Stage_Power > Boiler On Threshold Electric, then set Boiler_Status = "On" If HWST > Boiler On Threshold Fossil, then set Boiler_Status = "On" Otherwise, If Boiler_Stage_Power <= Boiler On Threshold Electric, Set Boiler_Status = "Off" If HWST <= Boiler On Threshold Fossil, Set Boiler_Status = "Off" Battelle Northwest, 2003 Page 157 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 4.3 Determine Boiler Last On and Off Times Calculate Boiler_Last_On_Time If Boiler_Status = "On" and "Boiler_Last_Status = "Off," then Set Boiler_NextTo_Last_On_Time = Boiler_Last_On_Time Set Boiler_Last_On_Time = Current_Time If Boiler_Status = "On" and "Boiler_Last_Status = "On," then Set Boiler_Last_On_Time = Boiler_Last_On_Time [Note: No change in value of Boiler_Last_On_Time.] If Boiler_Status = "Off" and "Boiler_Last_Status = "Off," then Set Boiler_Last_On_Time = Boiler_Last_On_Time [Note: No change in value of Boiler_Last_On_Time.] If Boiler_Status = "Off" and "Boiler_Last_Status = "On," then Set Boiler_Last_On_Time = Boiler_Last_On_Time [Note: No change in value of Boiler_Last_On_Time.] Calculate Boiler_Last_Off_Time If Boiler_Status = "Off" and "Boiler_Last_Status = "On," then Set Boiler_NextTo_Last_Off_Time = Boiler_Last_Off_Time Set Boiler_Last_Off_Time = Current_Time If Boiler_Status = "Off" and "Boiler_Last_Status = "Off," then Set Boiler_Last_Off_Time = Boiler_Last_Off_Time [Note: No change in value of Boiler_Last_Off_Time.] If Boiler_Status = "On" and "Boiler_Last_Status = "On," then Set Boiler_Last_Off_Time = Boiler_Last_Off_Time [Note: No change in value of Boiler_Last_Off_Time.] If Boiler_Status = "On" and "Boiler_Last_Status = "Off," then Set Boiler_Last_Off_Time = Boiler_Last_Off_Time [Note: No change in value of Boiler_Last_Off_Time.] Battelle Northwest, 2003 Page 158 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 5.0 Diagnose HW Pump Shutoff If Boiler_Status = "Off" AND HW_Pump_Status = "Off" Set HW_Pump_Shutoff_OK/Not = "OK; the hot-water pump is off as it should be." If Boiler_Status = "On" AND HW_Pump_Status = "On" Set HW_Pump_Shutoff_OK/Not = "OK; the hot-water pump is on while the boiler is on." If Boiler_Schedule_Type = "Ambient Shutoff" OR "Manual Shutoff" AND Boiler_Status = "Off" AND HW_Pump_Status = "On" AND Current_time - Boiler_Last_On_Time <= HW_Pump_Run_Limit, then Set HW_Pump_Shutoff_OK/Not = "OK; the hot-water pump is running while the boiler is off, but the hot-water run limit has not been exceeded yet." If Boiler_Schedule_Type = "Ambient Shutoff" OR "Manual Shutoff" AND Boiler_Status = "Off" AND HW_Pump_Status = "On," AND Current_time - Boiler_Last_On_Time > HW_Pump_Run_Limit, then Set HW_Pump_Shutoff_OK/Not = "Not OK; the hot-water pump is running unnecessarily, wasting energy, and unnecessarily reducing its remaining operating life." Note: No diagnostics are provided for HW Pump off while boiler is on. This requires further development. This situation can also present a safety problem so it is important from a safety standpoint as well as efficient operation. Additional diagnostics are needed. Battelle Northwest, 2003 Page 159 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 6.0 Determine Hot-Water Pump State HW_Pump_Motor_Rated_Current 6.1 Set Hot Water HW_Pump_On_Threshold Pump On Threshold 6.2 Determine HW_Pump_P Hot-Water HW_Pump_Status Pump Status HW_Pump_Current Battelle Northwest, 2003 Page 160 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 6.1 Set Hot Water Pump On Threshold Calculate the HW_Pump_On_Threshold using HW_Pump_On_Threshold = HW_Pump_P x HW_Pump_Motor_Rated_Current Notes: The value of HW_Pump_P can be a user input or a default value. Battelle Northwest, 2003 Page 161 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 6.2 Determine Hot-Water Pump Status Update HW_Pump_Last_Status Set HW_Pump_Last_Status = HW_Pump_Status For each value of HW_Pump_Current, check if the HW_Pump_On_Threshold is exceeded, and set the hot-water pump status accordingly. If the value of HW_Pump_Current <= HW_Pump_On_Threshold, then set HW_Pump_Status = "Off" If the value of HW_Pump_Current > HW_Pump_On_Threshold, then set HW_Pump_Status = "On." Battelle Northwest, 2003 Page 162 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> 7. Appendix D: Data Dictionary for Boilers aecdoe software requirements specification1-1pnnl14382.doc Page 163 of 176 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values The cumulative rated capacity of Capacity in Btu/h Boiler_Capacity all boilers used for space conditioning in Btu/h. A variable that indicates the Positive integer. Boiler_Cycles_Past_Hour number of complete boiler on/off cycles that have occurred during the hour immediately preceding the current time. Boiler cycling status variable, Ok. Boiler_Cycling OK/Not which can take on values as "Not OK. The Boiler is indicated in the process cycling on and off description. excessively." "Not OK. The Boiler is cycling on excessively." "Not OK. The Boiler is cycling off excessively." A setup variable that indicates the Electric or Fossil. Boiler_Fuel type of energy source used to fire the boiler. A variable identifying the absolute Time in minutes. Boiler_Last_Off_Time time at which the boiler was last shut “Off” (i.e., changed from on to off). A variable identifying the absolute Time in minutes. Boiler_Last_On_Time time at which the boiler was last turned “On” (i.e., changed from off to on). The value of the Boiler_Status one “On” or “Off” Boiler_Last_Status time step ago (i.e., the processing time before the current time). A variable identifying the absolute Time in minutes. Boiler_NextTo_Last_Off_Time at which the boiler was shut “Off” two times ago (i.e., changed from on to off). A variable identifying the absolute Time in minutes. Boiler_NextTo_Last_On_Time time at which the boiler was turned “On” two times ago (i.e., changed from off to on). Numeric value for the day of the Numerical value for day Boiler_Off_Date year on which the boiler is of year. ordinarily turned off at the end of the heating season with the days of the year numbered consecutively; e.g., April 1 is day 91 for a non-leap year. aecdoe software requirements specification1-1pnnl14382.doc Page 164 of 176 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values The number of days before the Number of days Boiler_Off_Date_dDown Boiler_Off_Date that the boiler may be turned off without the boiler operation considered to be in error (i.e., it should be on). The number of days beyond the Number of days Boiler_Off_Date_dUp Boiler_Off_Date that the boiler may be on before the boiler operation is considered to be in error (i.e., it should be off). Numeric value for the day of the Numerical value for day Boiler_On_Date year on which the boiler is of year. normally turned on for the heating season with the days of the year numbered consecutively; e.g., October 31 is day 304 for a non- leap year. The number of days before the Number of days Boiler_On_Date_dDown Boiler_On_Date that the boiler may be turned on without the boiler operation considered to be in error (i.e., it should be off). The number of days beyond the Number of days Boiler_On_Date_dUp Boiler_On_Date that the boiler may be off before the boiler operation is considered to be in error (i.e., it should be on). The electric current threshold Electric current in amps Boiler_On_Threshold_Electric above which an electric boiler is or null. Real. considered “On.” Fraction of Boiler_Capaciity Dimensionless real Boiler_On_Threshold_Electric_P selected for the "On" Threshold for number between 0.0 and electric boilers (e.g. 0.01) 1.0 (e.g., 0.01) The hot water supply temperature Temperature in degrees Boiler_On_Threshold_Fossil above which a fossil fuel-fired F or null. Real. boiler is considered “On.” An indicator of the type of boiler “Ambient Shutoff,” Boiler_Schedule_Type schedule. It can take values of “Manual Shutoff,” or “Ambient Shutoff,” “Manual “Always On.” Shutoff,” and “Always On.” aecdoe software requirements specification1-1pnnl14382.doc Page 165 of 176 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values A variable that indicates whether "OK. The boiler is on as it Boiler_Shutoff_OK/Not shut off of the boiler is controlled should be. Shutoff is not properly for and consistently with applicable to this boiler. the type of boiler. The boiler system is designed for continuous operation." "Not OK; the boiler is off and it should be on always, unless it is locked out temporarily for maintenance or repair." "OK; the boiler is on as it should be." "OK; the boiler is off as it should be" "Not OK; the boiler is off when it should be on." "Not OK; the boiler is on when it should be off." "Ok; the date is too close to the Boiler On Date to evaluate compliance with the schedule." "Ok; the date is too close to the Boiler Off Date to evaluate compliance with the schedule." The electric power to the boiler Electric power in watts. Boiler_Stage_Power heating elements at the current Real. time. Does not include auxiliary power such as valves and fans. A variable indicating whether the On or Off. Boiler_Status boiler is on or off. Boiler_Status at the time (nt * On or Off. Boiler_Status(nt * TimeStep) TimeStep). The variable nt takes values less than or equal to zero. A numerical indicator of the 0 or 1 BSNumber Boiler_Status, where Boiler_Status = “on” corresponds to BSNumber = 1, and Boiler_Status = “Off” corresponds to BSNumber = 0. A numerical indicator of the current Date Current_Date date corresponding to the current processing time, counting from January 1 of each year. The absolute time of the current Time in minutes. Current_Time time step. aecdoe software requirements specification1-1pnnl14382.doc Page 166 of 176 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values An local variable used to keep Integer values. Cycle_Counts count of the number of complete on/off cycles during a designated time period. Design hot-water supply Temperature in degrees Design_HWST temperature. F. Real. Fraction of HWST- Real value between 0.0 FHWST_High SP_Maintained_OK/Not equal to and 1.0. "Too High" over the last HWST_Too_High_Window The fraction of “Too High” hot Real value between 0.0 FHWST_High_Limit water supply temperature and 1.0. observations over the designated time window for which the long- term HWST is judged too high. Fraction of HWST- Real value between 0.0 FHWST_Low SP_Maintained_OK/Not equal to and 1.0. "Too Low" over the last HWST_Too_Low_Window. The fraction of “Too Low” hot water Real value between 0.0 FHWST_Low_Limit supply temperature observations and 1.0. over the designated time window for which the long-term HWST is judged too low. The measured value of current for Current in amps. HW_Pump_Current the hot-water pump The value of hot-water pump Current in amps. HW_Pump_On_Threshold current (HW_Pump_Current) above which the pump is considered on. The value of the “On” or “Off” HW_Pump_Last_Status HW_Pump_Status one time step ago (i.e., the processing time before the current time). Current rating of the hot-water Current in amps. HW_Pump_Motor_Rated_Current pump motor from the motor nameplate. Fraction of Hot-Water pump rated Dimensionless real HW_Pump_P current selected for the "On" number between 0.0 and Threshold. 1.0. The maximum time interval after Time interval in hours. HW_Pump_Run_Limit the boiler turns off during which the hot-water pump can run. After this time, the hot-water pump should not turn on again until the boiler turns on. aecdoe software requirements specification1-1pnnl14382.doc Page 167 of 176 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values A variable indicator whether the "OK; the hot-water pump HW_Pump_Shutoff_OK/Not On/Off status of the hot-water is off as it should be." pump is being controlled properly "OK; the hot water pump or not, and if not, how is it’s control is on while the boiler is wrong. on." "Hot Water Pumping Fault; the pump is off too much while the boiler is on." "HW Pump is running unnecessarily and wasting energy and useful operating life." "OK; the hot-water pump is running while the boiler is off, but the hot-water run limit has not been exceeded yet." A variable indicating whether the “On” or “Off” HW_Pump_Status hot-water pump is on or off. Hot-water supply temperature Temperature in degrees HWST F. Maximum acceptable deviation of Temperature in degrees HWST_dDown the hot-water supply temperature F. below its set point for a single measurement. The hot water supply temperature Temperature difference in HWST_Deviation deviation from set point for the degrees F. current observation. [Note: This output is included only for consistency with the chilled water reset diagnostic and may not be needed.] Maximum acceptable deviation of Temperature in degrees HWST_dUp the hot-water supply temperature F. above its setpoint for a single measurement. Hot Water Supply Temperature Ok. HWST_Maintained_OK/Not Status Message. Possible values: Too high. “OK,” “Too high,” “Too Low.” Too low. aecdoe software requirements specification1-1pnnl14382.doc Page 168 of 176 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values The array: Array with individual HWST_Maintained_OK/not_Too- {HWST_Maintained_OK/not, elements takings values Low_ Array HWST_Maintained_OK/not (1 time of Ok, Too High, or Too step ago), HWST_Maintained Low. OK/not (2 time steps ago), HWSTMaintained_OK/not (3 time steps ago), HWST_Maintained- OK/not (4 time steps ago), ...HWST_Maintained_OK/not [(HWST_Too_Low_Window – 1) time steps ago]} The array: Array with individual HWST_Maintained_OK/not_Too- {HWST_Maintained_OK/not, elements takings values High_ Array HWST_Maintained_OK/not (1 time of Ok, Too High, or Too step ago), HWST_Maintained Low. OK/not (2 time steps ago), HWSTMaintained_OK/not (3 time steps ago), HWST_Maintained- OK/not (4 time steps ago), .HWST_Maintained_OK/not [(HWST_Too_High_Window – 1) time steps ago]} HWSTNumber High is the number Integer. HWSTNumber_High of values of the variable HWST_Maintained_OK/not with values of “Too High” during the last HWST_Too_High_Window time steps. HWSTNumber Low is the number Integer. HWSTNumber_Low of values of the variable HWST_Maintained_OK/not with values of “Too Low” during the last HWST_Too_Low_Window time steps. Hot-water supply temperature Temperature in degrees HWST_Setpoint-Current setpoint for the current time. F. An indicator of whether the hot- OK HWST-SP_Maintained_OK/Not water supply temperature is Too high adequately maintained at a single Too low point in time. Length in number of observations Number of time steps. HWST_Too_High_Window of the moving time window over Integer which the percentage of too high hot water supply temperatures is evaluated. Length in number of observations Number of time steps. HWST_Too_Low_Window of the moving time window over Integer which the percentage of too low hot water supply temperatures is evaluated. aecdoe software requirements specification1-1pnnl14382.doc Page 169 of 176 Automated Diagnostics Version: 1.1 Software Requirements Specification Date: 8/28/2003 <document identifier> Variable Definition Values The length of time over which the Time interval in minutes. Latest_Complete_Boiler_Off_Durati boiler was off the last time it went on through a complete off-cycle (i.e., from on to off to on again). The length of time over which the Time interval in minutes. Latest_Complete_Boiler_On_Durati boiler was on the last time it went on through a complete on-cycle (i.e., from off to on to off again). A setup variable for the maximum Positive integer. Max_Normal_Boiler_CPH number of cycles that the boiler should go through in an hour. A setup variable that indicates the Time interval in minutes. Min_Normal_Boiler_Off_Duration minimum time the boiler should be off before turning on again. A setup variable that indicates the Time interval in minutes. Min_Normal_Boiler_On_Duration minimum time the boiler should be on before shutting off again. Number of times steps per hour = Positive integer. Nmax 60/TimeStep = the rounded number of calculation time steps per hour given the length of the time step designated during set up. An index for the number of time Integer, usually less than nt steps. or equal to zero. A setup variable for the length of Time increment in TimeStep time between successive minutes. processings in minutes (which is assumed constant). Total number of time steps Integer. Time_Steps_Processed processed since the beginning of processing. aecdoe software requirements specification1-1pnnl14382.doc Page 170 of 176